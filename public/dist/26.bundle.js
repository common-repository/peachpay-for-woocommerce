!function(){try{var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new Error).stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="c0bbe9b1-acff-44ec-8ab9-db5ab02e7fe6",n._sentryDebugIdIdentifier="sentry-dbid-c0bbe9b1-acff-44ec-8ab9-db5ab02e7fe6")}catch(n){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"1.96.0"},(self.webpackChunkpeachpay_for_woocommerce=self.webpackChunkpeachpay_for_woocommerce||[]).push([[26],{5026:(n,e,t)=>{t.r(e),t.d(e,{default:()=>_});var i=t(3940),a=t(9545),o=t(9276),r=t(5519),s=t(7462),c=t(7629),d=t(9970),l=t(8401),p=t(7059),u=t(3658),f=t(6204),y=t(6673),b=t(1212),h=t(4071);function g(){p.h.subscribe((function(){!function(n,e,t){n.startsWith("peachpay_poynt_")&&"payment"===e?(0,a.HD)(".poynt-btn-container",(function(n){n.classList.remove("hide")})):(0,a.HD)(".poynt-btn-container",(function(n){n.classList.add("hide")}));"loading"===t?(0,a.HD)(".poynt-btn",(function(n){n.classList.add("hide")})):(0,a.HD)(".poynt-btn",(function(n){n.classList.remove("hide")}))}(c.hv.selectedGateway(),s.qA.modalUI.page(),s.qA.modalUI.loadingMode()),function(n){"loading"===n?(0,a.HD)(".poynt-spinner-container",(function(n){n.classList.remove("hide")})):(0,a.HD)(".poynt-spinner-container",(function(n){n.classList.add("hide")}));"processing"===n?(0,a.HD)(".poynt-btn-spinner",(function(n){n.classList.remove("hide")})):(0,a.HD)(".poynt-btn-spinner",(function(n){n.classList.add("hide")}));"processing"===n?(0,a.HD)(".poynt-btn > .button-text",(function(n){n.innerHTML=(0,h.M)("Processing")})):(0,a.HD)(".poynt-btn > .button-text",(function(n){n.innerHTML="".concat((0,h.M)("Pay")," ").concat((0,b.o)(y.AQ.total()))}));"finished"===n?(0,a.HD)(".poynt-btn",(function(n){n.disabled=!1})):(0,a.HD)(".poynt-btn",(function(n){n.disabled=!0}))}(s.qA.modalUI.loadingMode())}))}var v=t(5045),m=t(9044),w=function(){function n(n){this.businessId=n.businessId,this.applicationId=n.applicationId,this.$cardElement=new TokenizeJs(this.businessId,this.applicationId)}return n.prototype.mount=function(n,e){this.$cardElement.mount(n,document,e)},n.prototype.tokenize=function(n){return(0,i.mG)(this,void 0,void 0,(function(){var e=this;return(0,i.Jh)(this,(function(t){return[2,new Promise((function(t){e.$cardElement.on("nonce",(function(n){n.data.nonce&&t({nonce:n.data.nonce})})),e.$cardElement.on("error",(function(n){var e,i,a,o,r;t({error:null!==(r=null!==(i=null===(e=n.data)||void 0===e?void 0:e.message)&&void 0!==i?i:null===(o=null===(a=n.data)||void 0===a?void 0:a.error)||void 0===o?void 0:o.message)&&void 0!==r?r:"Something went wrong. Please try again."})})),e.$cardElement.getNonce(n)}))]}))}))},n}();function _(n){return(0,i.mG)(this,void 0,void 0,(function(){var e,t,y,b;return(0,i.Jh)(this,(function(_){switch(_.label){case 0:return s.L0.enabled("peachpay_poynt_gateways")?(e=s.L0.metadata("peachpay_poynt_gateways","poynt_src"),t=s.L0.metadata("peachpay_poynt_gateways","business_id"),y=s.L0.metadata("peachpay_poynt_gateways","application_id"),t&&y&&e?(b={businessId:t,applicationId:y},[4,(0,a.ve)(e,null,(function(){var e=function(){var n={},e={};if(s.L0.enabled("peachpay_poynt_card_gateway")){var t=function(){var n,e={name:null!==(n=s.L0.metadata("peachpay_poynt_card_gateway","title"))&&void 0!==n?n:(0,h.M)("Card"),gatewayId:"peachpay_poynt_card",description:"",assets:{title:{src:v},badge:{src:m}}},t=null;return{config:e,init:function(n){var e=(0,a.MW)('#pp-pms-new div.pp-pm-saved-option[data-gateway="peachpay_poynt_card"]');e&&(e.setAttribute("id","pp-poynt-new"),e.style.padding="0px",e.style.border="0px",e.style.width="-webkit-fill-available",(t=new w(n)).mount("pp-poynt-new",{iFrame:{border:"0px",borderRadius:"0px",boxShadow:"none",height:"84px",width:"-webkit-fill-available"}}))},tokenize:function(n){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return t?[2,t.tokenize(n)]:[2,{error:"Poynt Card element not found while attempting to tokenize card."}]}))}))}}}();e[t.config.gatewayId]=t.config,n[t.config.gatewayId]=t}return p.h.dispatch((0,c.Cj)(e)),n}();!function(n,e,t){var y,b;try{for(var h=(0,i.XA)(Object.entries(n)),g=h.next();!g.done;g=h.next()){var v=(0,i.CR)(g.value,2),m=(v[0],v[1]);m.init&&m.init(t)}}catch(n){y={error:n}}finally{try{g&&!g.done&&(b=h.return)&&b.call(h)}finally{if(y)throw y.error}}var w=function(t){if((0,o.N6)()){var y=t.target;if(null==y?void 0:y.closest("button")){var b=c.hv.selectedGateway(),h=n[b];if(h)return function(n,e){return(0,i.mG)(this,void 0,void 0,(function(){var t,o,y,b,h,g,v;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return(0,a.HD)(".pp-pm-error-text",(function(n){n.remove()})),p.h.dispatch((0,s.N5)()),t=function(){var n={};d.gx.billing.email()&&(n.emailAddress=d.gx.billing.email());d.gx.billing.firstName()&&(n.firstName=d.gx.billing.firstName());d.gx.billing.lastName()&&(n.lastName=d.gx.billing.lastName());d.gx.billing.address1()&&(n.line1=d.gx.billing.address1());d.gx.billing.postal()&&(n.zipCode=d.gx.billing.postal());return n}(),[4,n.tokenize(t)];case 1:return o=i.sent(),y=o.nonce,b=o.error,[4,e.startTransaction(n.config.gatewayId)];case 2:return(h=i.sent())?(null!=b?b:!y)?[4,h.complete({paymentStatus:"creationfailed",orderStatus:"unperformed",note:null!=b?b:"An unknown error occured while retrieving the nonce."})]:[3,4]:(p.h.dispatch((0,s.tv)()),[2]);case 3:return i.sent(),(0,u.j1)(null!=b?b:"An unknown error occured while tokenizing the payment method."),p.h.dispatch((0,s.tv)()),[2];case 4:return[4,e.placeOrder(h,{peachpay_session_id:l.Z5.sessionId(),peachpay_transaction_id:h.getId(),peachpay_poynt_nonce:y})];case 5:return"failure"!==(g=i.sent()).result?[3,7]:[4,null==h?void 0:h.complete()];case 6:return i.sent(),p.h.dispatch((0,s.tv)()),[2];case 7:return p.h.dispatch((0,d.H$)(c.hv.selectedGateway())),(0,r.ll)(),(0,f.c)(),v=e.getOrderRedirect(g),window.top?[4,h.complete()]:[3,9];case 8:i.sent(),window.top.location=v,i.label=9;case 9:return[2]}}))}))}(h,e)}}};(0,a.HD)(".poynt-btn",(function(n){n.addEventListener("click",(function(n){return w(n)}))}))}(e,n,b),g()}))]):[2]):[2];case 1:return _.sent(),[2]}}))}))}},9044:(n,e,t)=>{n.exports=t.p+"img/d2a66f3e82ab3efab425-card.svg"},5045:(n,e,t)=>{n.exports=t.p+"img/b2c8b12eb49165de87d5-credit-card-regular.svg"}}]);
//# sourceMappingURL=26.bundle.js.map