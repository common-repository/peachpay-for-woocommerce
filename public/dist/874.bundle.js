"use strict";(self.webpackChunkpeachpay_for_woocommerce=self.webpackChunkpeachpay_for_woocommerce||[]).push([[874],{4537:(e,t,n)=>{n.r(t),n.d(t,{default:()=>le});var a=n(655),r="https://js.stripe.com/v3",i=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,o="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",s=null,c=function(e){return null!==s||(s=new Promise((function(t,n){if("undefined"!=typeof window)if(window.Stripe&&e&&console.warn(o),window.Stripe)t(window.Stripe);else try{var a=function(){for(var e=document.querySelectorAll('script[src^="'.concat(r,'"]')),t=0;t<e.length;t++){var n=e[t];if(i.test(n.src))return n}return null}();a&&e?console.warn(o):a||(a=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(r).concat(t);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(n),n}(e)),a.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),a.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(e){return void n(e)}else t(null)}))),s},l=function(e,t,n){if(null===e)return null;var a=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.44.1",startTime:t})}(a,n),a},u=Promise.resolve().then((function(){return c(null)})),d=!1;u.catch((function(e){d||console.warn(e)}));var p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];d=!0;var a=Date.now();return u.then((function(e){return l(e,t,a)}))},m=n(9545),y=n(2121),f=n(9276),h=n(9536),v=n(7418),g=n(7462),b=n(7629),_=n(9970),w=n(8401),L=n(7059),x=n(6204),M=n(6673),k=n(1212),S=n(4071);function F(){L.h.subscribe((function(){!function(e,t,n){"stripe"===e&&n>0?(0,m.HD)(".stripe-btn-container",(function(e){e.classList.remove("hide")})):(0,m.HD)(".stripe-btn-container",(function(e){e.classList.add("hide")}));"stripe"===e&&"loading"!==t&&n>0?(0,m.HD)(".stripe-btn",(function(e){e.classList.remove("hide")})):(0,m.HD)(".stripe-btn",(function(e){e.classList.add("hide")}))}(b.hv.selectedProvider(),g.qA.modalUI.loadingMode(),M.z9.total()),function(e,t){if("stripe"!==e)return;"finished"===t?(0,m.HD)(".stripe-btn",(function(e){e.disabled=!1})):(0,m.HD)(".stripe-btn",(function(e){e.disabled=!0}));"loading"===t?(0,m.HD)(".pp-btn-spinner-container",(function(e){e.classList.remove("hide")})):(0,m.HD)(".pp-btn-spinner-container ",(function(e){e.classList.add("hide")}));"processing"===t?((0,m.HD)(".stripe-btn > .button-text",(function(e){e.innerHTML=(0,S.M)("Processing")})),(0,m.HD)(".stripe-btn-spinner",(function(e){e.classList.remove("hide")})),(0,m.HD)(".modal-lock-icon",(function(e){e.classList.add("hide")}))):((0,m.HD)(".stripe-btn > .button-text",(function(e){e.innerHTML="".concat((0,S.M)("Pay")," ").concat((0,k.o)(M.AQ.total()))})),(0,m.HD)(".stripe-btn-spinner",(function(e){e.classList.add("hide")})))}(b.hv.selectedProvider(),g.qA.modalUI.loadingMode())}))}var P=n(9350);function A(e,t,n){return(0,a.mG)(this,void 0,void 0,(function(){var r,i,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return r=g.L0.metadata("peachpay_stripe_gateways","setup_intent_url"),i=g.L0.metadata("peachpay_stripe_gateways","setup_intent_nonce"),r&&i?((o=new FormData).append("security",i),o.append("session_id",e),o.append("payment_method_type",t),n&&o.append("payment_method",n),[4,fetch(r,{method:"POST",body:o})]):[2,null];case 1:return[4,a.sent().json()];case 2:return(s=a.sent()).success?[2,s.data.setup_intent_details.client_secret]:[2,null]}}))}))}var z=n(9402);function D(e){return(0,a.mG)(this,void 0,void 0,(function(){return(0,a.Jh)(this,(function(t){return[2,new Promise((function(t,n){(0,m.MW)("body",(function(t){t.insertAdjacentHTML("beforeend",function(e){var t=(new Date).toLocaleDateString(),n=" "===e.fullName?"":"<p>Name: ".concat(e.fullName,"</p>");return'\n<div id="ach-mandate-container">\n    <div id="ach-mandate-modal">\n        <div id="ach-mandate-header">\n            <button type="button" id="ach-button-x" class="txt-btn" style="font-size: 2rem;">Ã—</button>\n        </div>\n        <div id="ach-mandate-body">\n            <span>\n                '.concat(n,"\n                <p>Date: ").concat(t,"</p>\n            </span>\n            <br>\n            <p>\n                \x3c!-- Note this text is only applicable to non recurring orders! --\x3e\n                ").concat((0,S.M)("By clicking <b>Accept</b>, you authorize"),' <span class="client">').concat(e.clientName,"</span> \n                ").concat((0,S.M)("to debit the bank account specified above for any amount owed for charges arising from your use of"),'\n                <span class="client">').concat(e.clientName,"'s</span> ").concat((0,S.M)("services and/or purchase of products from "),'\n                <span class="client">').concat(e.clientName,"</span>, ").concat((0,S.M)("pursuant to"),' <span class="client">').concat(e.clientName,"'s</span> ").concat((0,S.M)("website and terms, until this authorization is revoked. You may amend or cancel this authorization at any time by providing notice to "),'\n                <span class="client">').concat(e.clientName,"</span> ").concat((0,S.M)("with 30 (thirty) days notice."),'\n            </p>\n            <br>\n            <div style="text-align: center;">\n                <button type="button" id="ach-button-accept" class="btn" style="padding: 9px; width: 7rem;">').concat((0,S.M)("Accept"),'</button>\n                <button type="button" id="ach-button-cancel" class="txt-btn">').concat((0,S.M)("Cancel"),"</button>\n            </div>\n        </div>\n    </div>\n    <style>\n        #ach-mandate-container{\n            position: fixed;\n            left: 0;\n            right: 0;\n            top: 0;\n            bottom: 0;\n            background-color: rgba(0,0,0,0.5);\n            animation-name: fadein;\n            animation-duration: 0.4s;\n        }\n\n        @keyframes fadein{\n            from {\n                background-color: rgba(0,0,0,0);\n            }\n            to {\n                background-color: rgba(0,0,0,0.5);\n            }\n        }\n\n        #ach-mandate-container .client{\n            border: 1px solid #e6e6e6;\n            border-radius: 0.2rem;\n            background-color: #e6e6e6;\n            padding: 0 4px;\n            margin-bottom: 1px;\n            display: inline-block;\n        }\n\n        #ach-mandate-modal{\n            position: absolute;\n            background-color: white;\n            border-radius: 0.4rem;\n            z-index: 10000000000;\n            width: 50vw;\n            box-shadow:  2px 8px 20px 3px rgb(0 0 0 / 20%);\n            margin: 0 calc(49vw / 2);\n            top: 10vh;\n        }\n\n        #ach-mandate-header{\n            padding: 0 0.5rem;\n            text-align: right;\n            border-bottom: 1px solid #e6e6e6;\n        }\n\n        #ach-mandate-body{\n            padding: 1.5rem;\n        }\n\n        #ach-mandate-body p {\n            margin: 0;\n            padding: 0;\n        }\n        \n        #ach-mandate-modal .txt-btn{\n            border: none;\n            background: none;\n            color: grey;\n            font-weight: 400;\n        }\n\n        #ach-mandate-modal .txt-btn:hover{\n            cursor: pointer;\n            color: red;\n        } \n\n        @media screen and (max-width: 768px) {\n\n            \n            #ach-mandate-modal{\n                width: 100%;\n                margin: 0;\n                left: 0;\n                right: 0;\n\n                animation-duration: 0.8s;\n                animation-name: slideup;\n                top: unset;\n                bottom: 0;\n                border-bottom-left-radius: 0;\n                border-bottom-right-radius: 0;\n            }\n\n            @keyframes slideup{\n                from {\n                    bottom: -100%\n                }\n                to {\n                    bottom: 0;\n                }\n            }\n\n        }\n\n        /*This prevents the background from being scrollable*/\n        body{\n            overflow: hidden !important;\n            touch-action: none !important;\n        }\n    </style>\n</div>")}(e))}));var a=(0,m.MW)("#ach-mandate-container"),r=(0,m.MW)("#ach-button-accept"),i=(0,m.MW)("#ach-button-cancel"),o=(0,m.MW)("#ach-button-x");if(!(a&&r&&i&&o))return null==a||a.remove(),void n(new Error("Developer error: Mandate was not mounted."));r.addEventListener("click",(function(){a.remove(),t(!0)})),i.addEventListener("click",(function(){a.remove(),t(!1)})),o.addEventListener("click",(function(){a.remove(),t(!1)}))}))]}))}))}const I=n.p+"img/4e8c9723f0389f28b036-affirm.svg",C=n.p+"img/75a621818cd858bfa053-affirm.svg";const G=n.p+"img/904e49a8efd52bd3017e-afterpay-logo.svg";var J=n(1924);const H=n.p+"img/12bea47a7191c4bc66b4-clearpay.svg";function N(e){var t;void 0===e&&(e=null);var n=g.L0.metadata("peachpay_stripe_afterpay_gateway","title");if(n&&"Afterpay"!==n&&"Clearpay"!==n)return n;if(e)return e;var a=_.gx.billing.country();switch(!a&&P.l9.general.wcLocationInfoData&&(a=null===(t=P.l9.general.wcLocationInfoData())||void 0===t?void 0:t.store_country),a){case"GB":case"ES":case"FR":case"IT":return"Clearpay";default:return"Afterpay"}}function q(e){var t;if(void 0===e&&(e=null),e)return e;var n=_.gx.billing.country();switch(!n&&P.l9.general.wcLocationInfoData&&(n=null===(t=P.l9.general.wcLocationInfoData())||void 0===t?void 0:t.store_country),n){case"GB":case"ES":case"FR":case"IT":return H;default:return J}}var E=n(3493),B=["BIF","CLP","DJF","GNF","JPY","KMF","KRW","MGA","PYG","RWF","UGX","VND","VUV","XAF","XOF","XPF"];function T(){var e,t=L.h.getState().calculatedCarts[0].cart,n=L.h.getState().calculatedCarts[0].summary;return{country:null!==(e=g.L0.metadata("peachpay_stripe_gateways","country"))&&void 0!==e?e:"US",currency:P.l9.currency.code().toLowerCase(),total:{label:(0,S.M)("Total"),amount:j(n.total,P.l9.currency.code())},displayItems:t.map((function(e){return{label:e.name,amount:j(Number.parseFloat(e.total)*Number.parseInt(e.quantity,10),P.l9.currency.code())}}))}}function R(){var e=L.h.getState().calculatedCarts[0].cart,t=L.h.getState().calculatedCarts[0].summary;return{currency:P.l9.currency.code().toLowerCase(),total:{label:(0,S.M)("Total"),amount:j(t.total,P.l9.currency.code())},displayItems:e.map((function(e){return{label:e.name,amount:j(Number.parseFloat(e.total)*Number.parseInt(e.quantity,10),P.l9.currency.code())}}))}}function W(e){return new Promise((function(t){null==e||e.on("paymentmethod",(function(n){e=null,n.complete("success"),t([n.paymentMethod.id,{}])})),null==e||e.on("cancel",(function(){e=null,t([null,{note:"Payment was canceled by customer"}])})),null==e||e.show()}))}function j(e,t){var n=Number.parseFloat(String(e));return B.includes(t)||(n*=100),Math.round(n)}var U=n(6857),O=n(3041);const Q=n.p+"img/1a65e514172655b40267-bancontact.svg",X=n.p+"img/31fa826b1a682e0e2d74-bancontact.svg";var K=n(8883),V=n(5792);const Y=n.p+"img/f98545e5c40ab6bbc044-eps.svg",Z=n.p+"img/165559a744e87642e227-eps.svg";const $=n.p+"img/daf9bd0b8caf0142833a-giropay.svg",ee=n.p+"img/cd1eec17937e892cf6c2-giropay.svg";var te=n(410),ne=n(3172);const ae=n.p+"img/bb216add609679e2a388-ideal.svg",re=n.p+"img/77fb0b8ca3843d373da4-ideal.svg";const ie=n.p+"img/89d1a718923a143f6ec3-klarna.svg",oe=n.p+"img/5606c9a7bca3cdc32c92-klarna.svg";const se=n.p+"img/d4044b8aea8f4aa47940-p24.svg",ce=n.p+"img/9ddd7317032bd9125379-p24.svg";function le(e){return(0,a.mG)(this,void 0,void 0,(function(){var t,n,r,i,o,s,c=this;return(0,a.Jh)(this,(function(l){switch(l.label){case 0:return t=g.L0.metadata("peachpay_stripe_gateways","public_key"),n=g.L0.metadata("peachpay_stripe_gateways","connect_id"),t&&n?[4,p(t,{stripeAccount:n,locale:"auto"})]:[2];case 1:return(r=l.sent())?(i=r.elements(),o={stripe:r,elements:i},s=function(){var e,t,n={};if(g.L0.enabled("peachpay_stripe_card_gateway")){var r=function(){var e,t;return{config:{name:null!==(e=g.L0.metadata("peachpay_stripe_card_gateway","title"))&&void 0!==e?e:(0,S.M)("Card"),slug:"card",gateway:"peachpay_stripe_card",description:"",addNewButton:(0,S.M)("+ NEW CARD"),savedButton:(0,S.M)("VIEW SAVED CARDS"),reusable:!1,assets:{title:{src:V},badge:{src:K}},defaultCurrency:g.L0.metadata("peachpay_stripe_card_gateway","default_currency"),currencies:null!==(t=g.L0.metadata("peachpay_stripe_card_gateway","supported_currencies"))&&void 0!==t?t:["ALL"]},init:function(e){var t=e.elements.create("card",{style:{base:{color:"#333",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"18px","::placeholder":{color:"#999"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},hidePostalCode:!1});(0,m.HD)('div.pp-pm-saved-option[data-provider="stripe"][data-method="card"][data-index=""]',(function(e){e.innerHTML=""}));var n=null;L.h.subscribe((function(){var e=g.qA.customer.existing();"stripe:card"===b.hv.selectedPaymentMethod()&&n!==e&&(n=e,t.unmount(),g.qA.customer.existing()?t.mount('#pp-pms-existing div.pp-pm-saved-option[data-provider="stripe"][data-method="card"][data-index=""]'):t.mount('#pp-pms-new div.pp-pm-saved-option[data-provider="stripe"][data-method="card"][data-index=""]'))}))},tokenize:function(e,t){var n,r;return(0,a.mG)(this,void 0,void 0,(function(){var i,o,s,c,l,u,d,p,m,y;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return i=e.stripe,o=e.elements,(s=o.getElement("card"))?[4,i.createPaymentMethod({type:"card",card:s,billing_details:_.gx.stripeBillingDetails()})]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to locate valid card element."}]];case 1:return c=a.sent(),l=c.paymentMethod,(u=c.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(n=u.message)&&void 0!==n?n:"Failed to tokenize payment method."}]]:(null==l?void 0:l.id)?M.AQ.total()>0?[2,[l.id,{}]]:[4,A(t,"card",l.id)]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]];case 2:return(d=a.sent())?[4,i.confirmCardSetup(d)]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to create setup intent."}]];case 3:return p=a.sent(),m=p.error,!(y=p.setupIntent)||m?[2,[null,{paymentStatus:"creationfailed",note:null!==(r=null==m?void 0:m.message)&&void 0!==r?r:"Failed to confirm setup intent."}]]:"succeeded"!==y.status?[2,[null,{paymentStatus:"creationfailed",note:"Setup intent resulted in invalid status(".concat(y.status,")")}]]:[2,[y.payment_method,{}]]}}))}))},confirm:function(e,t){var n,r;return(0,a.mG)(this,void 0,void 0,(function(){var i,o,s,c,l,u,d;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,(i=e.stripe).retrievePaymentIntent(t)];case 1:return o=a.sent(),s=o.paymentIntent,c=o.error,!s||c?[2,[null,{note:null!==(n=null==c?void 0:c.message)&&void 0!==n?n:"Failed to retrieve payment intent."}]]:"succeeded"===s.status||"requires_capture"===s.status?[2,["success",{}]]:"requires_action"!==s.status?[3,3]:[4,i.confirmCardPayment(t)];case 2:if(l=a.sent(),u=l.paymentIntent,d=l.error,!u||d)return[2,[null,{note:null!==(r=null==d?void 0:d.message)&&void 0!==r?r:"Failed to confirm payment intent."}]];if("succeeded"===u.status||"requires_capture"===u.status)return[2,["success",{}]];a.label=3;case 3:return[2,[null,{note:"Failed to confirm payment intent with status(".concat(s.status,")")}]]}}))}))}}}();n.card=r}if(g.L0.enabled("peachpay_stripe_affirm_gateway")){var i=function(){var e,t;return{config:{name:null!==(e=g.L0.metadata("peachpay_stripe_affirm_gateway","title"))&&void 0!==e?e:"Affirm",slug:"affirm",gateway:"peachpay_stripe_affirm",description:(0,S.M)("After selecting pay you will be redirected to complete your payment."),reusable:!1,assets:{title:{src:I},badge:{src:C}},defaultCurrency:g.L0.metadata("peachpay_stripe_affirm_gateway","default_currency"),currencies:null!==(t=g.L0.metadata("peachpay_stripe_affirm_gateway","supported_currencies"))&&void 0!==t?t:["ALL"]},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.createPaymentMethod({type:"affirm",billing_details:_.gx.stripeBillingDetails()})];case 1:return n=a.sent(),r=n.paymentMethod,(i=n.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=i.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==r?void 0:r.id)?[2,[r.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var r;return(0,a.mG)(this,void 0,void 0,(function(){var i,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmAffirmPayment(t,{return_url:n})];case 1:return i=a.sent(),o=i.paymentIntent,(s=i.error)?[2,[null,{note:null!==(r=s.message)&&void 0!==r?r:"Failed to confirm payment."}]]:o?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();n.affirm=i}if(g.L0.enabled("peachpay_stripe_klarna_gateway")){var o=function(){var e,t;return{config:{name:null!==(e=g.L0.metadata("peachpay_stripe_klarna_gateway","title"))&&void 0!==e?e:"Klarna",slug:"klarna",gateway:"peachpay_stripe_klarna",description:(0,S.M)("After selecting pay you will be redirected to complete your payment."),reusable:!1,assets:{title:{src:oe},badge:{src:ie}},defaultCurrency:g.L0.metadata("peachpay_stripe_klarna_gateway","default_currency"),currencies:null!==(t=g.L0.metadata("peachpay_stripe_klarna_gateway","supported_currencies"))&&void 0!==t?t:["ALL"]},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.createPaymentMethod({type:"klarna",billing_details:_.gx.stripeBillingDetails()})];case 1:return n=a.sent(),r=n.paymentMethod,(i=n.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=i.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==r?void 0:r.id)?[2,[r.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var r;return(0,a.mG)(this,void 0,void 0,(function(){var i,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmKlarnaPayment(t,{return_url:n})];case 1:return i=a.sent(),o=i.paymentIntent,(s=i.error)?[2,[null,{note:null!==(r=s.message)&&void 0!==r?r:"Failed to confirm payment."}]]:o?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();n.klarna=o}if(g.L0.enabled("peachpay_stripe_afterpay_gateway")){var s=function(){var e;return{config:{name:N(),slug:"afterpay",gateway:"peachpay_stripe_afterpay",description:(0,S.M)("After selecting pay you will be redirected to complete your payment."),reusable:!1,assets:{title:{src:q()},badge:{src:G}},defaultCurrency:g.L0.metadata("peachpay_stripe_afterpay_gateway","default_currency"),currencies:null!==(e=g.L0.metadata("peachpay_stripe_afterpay_gateway","supported_currencies"))&&void 0!==e?e:["ALL"]},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.createPaymentMethod({type:"afterpay_clearpay",billing_details:_.gx.stripeBillingDetails()})];case 1:return n=a.sent(),r=n.paymentMethod,(i=n.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=i.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==r?void 0:r.id)?[2,[r.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var r;return(0,a.mG)(this,void 0,void 0,(function(){var i,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmAfterpayClearpayPayment(t,{return_url:n})];case 1:return i=a.sent(),o=i.paymentIntent,(s=i.error)?[2,[null,{note:null!==(r=s.message)&&void 0!==r?r:"Failed to confirm payment."}]]:o?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();n.afterpay_clearpay=s}if(g.L0.enabled("peachpay_stripe_sofort_gateway")){var c=function(){var e,t;return{config:{name:null!==(e=g.L0.metadata("peachpay_stripe_sofort_gateway","title"))&&void 0!==e?e:"Sofort",slug:"sofort",gateway:"peachpay_stripe_sofort",description:(0,S.M)("After selecting <b>Pay</b> you will be redirected to complete your payment."),reusable:!1,assets:{title:{src:ie},badge:{src:ie}},defaultCurrency:g.L0.metadata("peachpay_stripe_sofort_gateway","default_currency"),currencies:null!==(t=g.L0.metadata("peachpay_stripe_sofort_gateway","supported_currencies"))&&void 0!==t?t:["ALL"]},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.createPaymentMethod({type:"sofort",sofort:{country:_.gx.billing.country()},billing_details:_.gx.stripeBillingDetails()})];case 1:return n=a.sent(),r=n.error,i=n.paymentMethod,r?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=r.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==i?void 0:i.id)?[2,[i.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var r;return(0,a.mG)(this,void 0,void 0,(function(){var i,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmSofortPayment(t,{return_url:n})];case 1:return i=a.sent(),o=i.paymentIntent,(s=i.error)?[2,[null,{note:null!==(r=s.message)&&void 0!==r?r:"Failed to confirm payment."}]]:o?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();n.sofort_payments=c}if(g.L0.enabled("peachpay_stripe_achdebit_gateway")){var l=function(){var e,t;return{config:{name:null!==(e=g.L0.metadata("peachpay_stripe_achdebit_gateway","title"))&&void 0!==e?e:(0,S.M)("US bank account"),description:'<p style="margin: 0;">'.concat((0,S.M)("After selecting <b>Pay</b> a prompt will appear to select a bank account."),'</p><hr><p class="muted" style="margin: 0;">').concat((0,S.M)("Note: Payments may take up to 5 days to complete."),"</p>"),slug:"us_bank_account",gateway:"peachpay_stripe_achdebit",reusable:!1,assets:{title:{src:z},badge:{src:z}},defaultCurrency:g.L0.metadata("peachpay_stripe_achdebit_gateway","default_currency"),currencies:null!==(t=g.L0.metadata("peachpay_stripe_achdebit_gateway","supported_currencies"))&&void 0!==t?t:["ALL"]},tokenize:function(e,t){var n,r;return(0,a.mG)(this,void 0,void 0,(function(){var i,o,s,c,l,u,d,p;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return i=e.stripe,[4,A(t,"us_bank_account")];case 1:return(o=a.sent())?[4,i.collectBankAccountForSetup({clientSecret:o,params:{payment_method_type:"us_bank_account",payment_method_data:{billing_details:{email:_.gx.billing.email(),name:_.gx.billing.firstName()+" "+_.gx.billing.lastName()}}}})]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to create setup intent."}]];case 2:return s=a.sent(),c=s.error,!(l=s.setupIntent)||c?[2,[null,{paymentStatus:"creationfailed",note:null!==(n=null==c?void 0:c.message)&&void 0!==n?n:"Failed to collect bank account for setup intent."}]]:"requires_confirmation"!==l.status?[2,[null,{paymentStatus:"creationfailed",note:"The customer canceled choosing a bank account."}]]:[4,D({fullName:_.gx.billing.fullName(),clientName:P.l9.name()})];case 3:return a.sent()?[4,i.confirmUsBankAccountSetup(o)]:[2,[null,{note:(0,S.M)("The required mandate was not accepted. Payment canceled.")}]];case 4:return u=a.sent(),d=u.error,!(p=u.setupIntent)||d?[2,[null,{paymentStatus:"creationfailed",note:null!==(r=null==d?void 0:d.message)&&void 0!==r?r:"Failed to confirm setup intent."}]]:"succeeded"!==p.status?[2,[null,{paymentStatus:"creationfailed",note:"Setup intent resulted in invalid status(".concat(p.status,")")}]]:[2,[p.payment_method,{}]]}}))}))},confirm:function(e,t){var n;return(0,a.mG)(this,void 0,void 0,(function(){var r,i,o;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.retrievePaymentIntent(t)];case 1:return r=a.sent(),i=r.paymentIntent,o=r.error,!i||o?[2,[null,{note:null!==(n=null==o?void 0:o.message)&&void 0!==n?n:"Failed to retrieve payment intent."}]]:"succeeded"===i.status||"processing"===i.status?[2,["success",{}]]:[2,[null,{note:"Failed to confirm payment intent with status(".concat(i.status,")")}]]}}))}))}}}();n.us_bank_account=l}if(g.L0.enabled("peachpay_stripe_eps_gateway")){var u=function(){var e,t;return{config:{name:null!==(e=g.L0.metadata("peachpay_stripe_eps_gateway","title"))&&void 0!==e?e:"EPS",slug:"eps",gateway:"peachpay_stripe_eps",description:(0,S.M)("After selecting <b>Pay</b> you will be redirected to complete your payment."),reusable:!1,assets:{title:{src:Z},badge:{src:Y}},defaultCurrency:g.L0.metadata("peachpay_stripe_eps_gateway","default_currency"),currencies:null!==(t=g.L0.metadata("peachpay_stripe_eps_gateway","supported_currencies"))&&void 0!==t?t:["ALL"]},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.createPaymentMethod({type:"eps",billing_details:_.gx.stripeBillingDetails()})];case 1:return n=a.sent(),r=n.paymentMethod,(i=n.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=i.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==r?void 0:r.id)?[2,[r.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var r;return(0,a.mG)(this,void 0,void 0,(function(){var i,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmEpsPayment(t,{return_url:n})];case 1:return i=a.sent(),o=i.paymentIntent,(s=i.error)?[2,[null,{note:null!==(r=s.message)&&void 0!==r?r:"Failed to confirm payment."}]]:o?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();n.eps=u}if(g.L0.enabled("peachpay_stripe_p24_gateway")){var d=function(){var e,t;return{config:{name:null!==(e=g.L0.metadata("peachpay_stripe_p24_gateway","title"))&&void 0!==e?e:"Przelewy24",slug:"p24",gateway:"peachpay_stripe_p24",description:(0,S.M)("After selecting <b>Pay</b> you will be redirected to complete your payment."),reusable:!1,assets:{title:{src:ce},badge:{src:se}},defaultCurrency:g.L0.metadata("peachpay_stripe_p24_gateway","default_currency"),currencies:null!==(t=g.L0.metadata("peachpay_stripe_p24_gateway","supported_currencies"))&&void 0!==t?t:["ALL"]},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.createPaymentMethod({type:"p24",billing_details:_.gx.stripeBillingDetails()})];case 1:return n=a.sent(),r=n.paymentMethod,(i=n.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=i.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==r?void 0:r.id)?[2,[r.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var r;return(0,a.mG)(this,void 0,void 0,(function(){var i,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmP24Payment(t,{return_url:n})];case 1:return i=a.sent(),o=i.paymentIntent,(s=i.error)?[2,[null,{note:null!==(r=s.message)&&void 0!==r?r:"Failed to confirm payment."}]]:o?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();n.p24=d}if(g.L0.enabled("peachpay_stripe_bancontact_gateway")){var p=function(){var e,t;return{config:{name:null!==(e=g.L0.metadata("peachpay_stripe_bancontact_gateway","title"))&&void 0!==e?e:"Bancontact",slug:"bancontact",gateway:"peachpay_stripe_bancontact",description:(0,S.M)("After selecting <b>Pay</b> you will be redirected to complete your payment."),reusable:!1,assets:{title:{src:X},badge:{src:Q}},defaultCurrency:g.L0.metadata("peachpay_stripe_bancontact_gateway","default_currency"),currencies:null!==(t=g.L0.metadata("peachpay_stripe_bancontact_gateway","supported_currencies"))&&void 0!==t?t:["ALL"]},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.createPaymentMethod({type:"bancontact",billing_details:_.gx.stripeBillingDetails()})];case 1:return n=a.sent(),r=n.paymentMethod,(i=n.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=i.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==r?void 0:r.id)?[2,[r.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var r;return(0,a.mG)(this,void 0,void 0,(function(){var i,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmBancontactPayment(t,{return_url:n})];case 1:return i=a.sent(),o=i.paymentIntent,(s=i.error)?[2,[null,{note:null!==(r=s.message)&&void 0!==r?r:"Failed to confirm payment."}]]:o?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();n.bancontact=p}if(g.L0.enabled("peachpay_stripe_giropay_gateway")){var y=function(){var e,t;return{config:{name:null!==(e=g.L0.metadata("peachpay_stripe_giropay_gateway","title"))&&void 0!==e?e:"giropay",slug:"giropay",gateway:"peachpay_stripe_giropay",description:(0,S.M)("After selecting <b>Pay</b> you will be redirected to complete your payment."),reusable:!1,assets:{title:{src:ee},badge:{src:$}},defaultCurrency:g.L0.metadata("peachpay_stripe_giropay_gateway","default_currency"),currencies:null!==(t=g.L0.metadata("peachpay_stripe_giropay_gateway","supported_currencies"))&&void 0!==t?t:["ALL"]},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.createPaymentMethod({type:"giropay",billing_details:_.gx.stripeBillingDetails()})];case 1:return n=a.sent(),r=n.paymentMethod,(i=n.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=i.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==r?void 0:r.id)?[2,[r.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var r;return(0,a.mG)(this,void 0,void 0,(function(){var i,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmGiropayPayment(t,{return_url:n})];case 1:return i=a.sent(),o=i.error,s=i.paymentIntent,o?[2,[null,{note:null!==(r=o.message)&&void 0!==r?r:"Failed to confirm payment."}]]:s?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();n.giropay=y}if(g.L0.enabled("peachpay_stripe_ideal_gateway")){var f=function(){var e,t;return{config:{name:null!==(e=g.L0.metadata("peachpay_stripe_ideal_gateway","title"))&&void 0!==e?e:"iDEAL",slug:"ideal",gateway:"peachpay_stripe_ideal",description:(0,S.M)("After selecting <b>Pay</b> you will be redirected to complete your payment."),reusable:!1,assets:{title:{src:re},badge:{src:ae}},defaultCurrency:g.L0.metadata("peachpay_stripe_ideal_gateway","default_currency"),currencies:null!==(t=g.L0.metadata("peachpay_stripe_ideal_gateway","supported_currencies"))&&void 0!==t?t:["ALL"]},init:function(e){var t=e.elements.create("idealBank",{style:{base:{padding:"5px 0",color:"#32325d",fontSize:"16px"}}});(0,m.HD)('div.pp-pm-saved-option[data-provider="stripe"][data-method="ideal"][data-index=""]',(function(e){e.innerHTML='\n<div style="text-align: left; display: flex; flex-direction: column;">\n    <label>\n        <span style="font-weight: 600;">'.concat((0,S.M)("Account name"),'</span>\n    </label>\n    <span class="ideal-accountholder-name" style="margin-bottom: 1rem;">').concat(_.gx.billing.fullName(),'</span>\n    <div style="border-radius: 4px; background-color: #f4f4f4; padding: 0.1rem 0.5rem;">\n        <label style="font-weight: 600; font-size: 13px; color: #707070;">').concat((0,S.M)("iDEAL Bank"),'</label>\n        <div class="ideal-container-element"></div>\n    </div>\n    <hr>\n    <p class="muted" style="text-align: center; margin: 0.5rem 0">').concat((0,S.M)("After selecting <b>Pay</b> you will be redirected to complete your payment."),"</p>\n</div>\n")}));var n=null;L.h.subscribe((function(){(0,m.HD)(".ideal-accountholder-name",(function(e){e.innerHTML=_.gx.billing.fullName()}));var e=g.qA.customer.existing();"stripe:ideal"===b.hv.selectedPaymentMethod()&&n!==e&&(n=e,t.unmount(),g.qA.customer.existing()?t.mount('#pp-pms-existing div.pp-pm-saved-option[data-provider="stripe"][data-method="ideal"][data-index=""] .ideal-container-element'):t.mount('#pp-pms-new div.pp-pm-saved-option[data-provider="stripe"][data-method="ideal"][data-index=""] .ideal-container-element'))}))},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,r,i,o,s,c;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return n=e.stripe,r=e.elements,(i=r.getElement("idealBank"))?[4,n.createPaymentMethod({type:"ideal",ideal:i,billing_details:_.gx.stripeBillingDetails()})]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to find the required Stripe element."}]];case 1:return o=a.sent(),s=o.paymentMethod,(c=o.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=c.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==s?void 0:s.id)?[2,[s.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var r;return(0,a.mG)(this,void 0,void 0,(function(){var i,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmIdealPayment(t,{return_url:n})];case 1:return i=a.sent(),o=i.paymentIntent,(s=i.error)?[2,[null,{note:null!==(r=s.message)&&void 0!==r?r:"Failed to confirm payment."}]]:o?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();n.ideal=f}if(g.L0.enabled("peachpay_stripe_applepay_gateway")){var h=function(){var e,t,n=this,r=null,i={name:null!==(e=g.L0.metadata("peachpay_stripe_applepay_gateway","title"))&&void 0!==e?e:(0,S.M)("Apple Pay"),slug:"card",gateway:"peachpay_stripe_applepay",description:'\n<img style="display: block; text-align: left; height: 1.5rem; " src="'.concat(O,'">\n<p style="text-align: left; margin: 0.5rem 0;">').concat((0,S.M)("Apple Pay selected for checkout."),'</p>\n<hr/>\n<p style="text-align: left; margin: 0.5rem 0 0;" class="muted">').concat((0,S.M)("Another step will appear after submitting your order to complete your purchase details."),"<p>\n    "),reusable:!1,assets:{title:{src:O},badge:{src:U}},defaultCurrency:g.L0.metadata("peachpay_stripe_applepay_gateway","default_currency"),currencies:null!==(t=g.L0.metadata("peachpay_stripe_applepay_gateway","supported_currencies"))&&void 0!==t?t:["ALL"]};L.h.subscribe((function(){null==r||r.update(R())}));var o=function(e){return(0,a.mG)(n,void 0,void 0,(function(){var t,n;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(r=e.paymentRequest(T())).canMakePayment()];case 1:return(null==(t=a.sent())?void 0:t.applePay)?[3,3]:(i.initialized=!1,L.h.dispatch((0,E.s)()),[2]);case 2:return n=a.sent(),console.error(n),[3,3];case 3:return[2]}}))}))};return{config:i,init:function(e){var t=e.stripe,n=!1;L.h.subscribe((function(){M.AQ.contents().length>0&&!n&&(n=!0,L.h.dispatch((0,E.s)()),o(t).catch((function(){})))}))},tokenize:function(e,t){var n;return(0,a.mG)(this,void 0,void 0,(function(){var i,s,c,l,u,d,p,m,y;return(0,a.Jh)(this,(function(f){switch(f.label){case 0:return i=e.stripe,r?(s=r,r=null,[4,W(s)]):[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method because paymentRequest object is not initialized."}]];case 1:return c=a.CR.apply(void 0,[f.sent(),2]),l=c[0],u=c[1],l?[3,3]:[4,o(i)];case 2:return f.sent(),[2,[null,u]];case 3:return M.AQ.total()>0?[2,[l,{}]]:[4,A(t,"card",l)];case 4:return(d=f.sent())?[3,6]:[4,o(i)];case 5:return f.sent(),[2,[null,{paymentStatus:"creationfailed",note:"Failed to create setup intent."}]];case 6:return[4,i.confirmCardSetup(d)];case 7:return p=f.sent(),m=p.error,y=p.setupIntent,(null!=m?m:!y)?[4,o(i)]:[3,9];case 8:return f.sent(),[2,[null,{paymentStatus:"creationfailed",note:null!==(n=null==m?void 0:m.message)&&void 0!==n?n:"Failed to confirm setup intent."}]];case 9:return"succeeded"===y.status?[3,11]:[4,o(i)];case 10:return f.sent(),[2,[null,{paymentStatus:"creationfailed",note:"Setup intent resulted in invalid status(".concat(y.status,")")}]];case 11:return[4,o(i)];case 12:return f.sent(),[2,[y.payment_method,{}]]}}))}))},confirm:function(e,t){var n,r;return(0,a.mG)(this,void 0,void 0,(function(){var i,o,s,c,l,u,d;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,(i=e.stripe).retrievePaymentIntent(t)];case 1:return o=a.sent(),s=o.paymentIntent,c=o.error,!s||c?[2,[null,{note:null!==(n=null==c?void 0:c.message)&&void 0!==n?n:"Failed to retrieve payment intent."}]]:"succeeded"===s.status||"requires_capture"===s.status?[2,["success",{}]]:"requires_action"!==s.status?[3,3]:[4,i.confirmCardPayment(t)];case 2:if(l=a.sent(),u=l.paymentIntent,d=l.error,!u||d)return[2,[null,{note:null!==(r=null==d?void 0:d.message)&&void 0!==r?r:"Failed to confirm payment intent."}]];if("succeeded"===u.status||"requires_capture"===u.status)return[2,["success",{}]];a.label=3;case 3:return[2,[null,{note:"Failed to confirm payment intent with status(".concat(s.status,")")}]]}}))}))}}}();n.applepay=h}if(g.L0.enabled("peachpay_stripe_googlepay_gateway")){var v=function(){var e,t,n=this,r=null,i={name:null!==(e=g.L0.metadata("peachpay_stripe_googlepay_gateway","title"))&&void 0!==e?e:(0,S.M)("Google Pay"),slug:"card",gateway:"peachpay_stripe_googlepay",description:'\n<img style="display: block; text-align: left; height: 1.7rem; " src="'.concat(ne,'">\n<p style="text-align: left; margin: 0.5rem 0;">').concat((0,S.M)("Google Pay selected for checkout."),'</p>\n<hr/>\n<p style="text-align: left; margin: 0.5rem 0 0;" class="muted">').concat((0,S.M)("Another step will appear after submitting your order to complete your purchase details."),"<p>\n    "),reusable:!1,assets:{title:{src:ne},badge:{src:te}},defaultCurrency:g.L0.metadata("peachpay_stripe_googlepay_gateway","default_currency"),currencies:null!==(t=g.L0.metadata("peachpay_stripe_googlepay_gateway","supported_currencies"))&&void 0!==t?t:["ALL"]},o=function(e){return(0,a.mG)(n,void 0,void 0,(function(){var t,n;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(r=e.paymentRequest(T())).canMakePayment()];case 1:return(null==(t=a.sent())?void 0:t.googlePay)?[3,3]:(i.initialized=!1,L.h.dispatch((0,E.s)()),[2]);case 2:return n=a.sent(),console.error(n),[3,3];case 3:return[2]}}))}))};return L.h.subscribe((function(){null==r||r.update(R())})),{config:i,init:function(e){var t=e.stripe,n=!1;L.h.subscribe((function(){M.AQ.contents().length>0&&!n&&(n=!0,L.h.dispatch((0,E.s)()),o(t).catch((function(){})))}))},tokenize:function(e,t){var n;return(0,a.mG)(this,void 0,void 0,(function(){var i,s,c,l,u,d,p,m,y;return(0,a.Jh)(this,(function(f){switch(f.label){case 0:return i=e.stripe,r?[3,2]:[4,o(i)];case 1:return f.sent(),[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method because paymentRequest object is not initialized."}]];case 2:return s=r,r=null,[4,W(s)];case 3:return c=a.CR.apply(void 0,[f.sent(),2]),l=c[0],u=c[1],l?[3,5]:[4,o(i)];case 4:return f.sent(),[2,[null,u]];case 5:return M.AQ.total()>0?[2,[l,{}]]:[4,A(t,"card",l)];case 6:return(d=f.sent())?[3,8]:[4,o(i)];case 7:return f.sent(),[2,[null,{paymentStatus:"creationfailed",note:"Failed to create setup intent."}]];case 8:return[4,i.confirmCardSetup(d)];case 9:return p=f.sent(),m=p.error,y=p.setupIntent,(null!=m?m:!y)?[4,o(i)]:[3,11];case 10:return f.sent(),[2,[null,{paymentStatus:"creationfailed",note:null!==(n=null==m?void 0:m.message)&&void 0!==n?n:"Failed to confirm setup intent."}]];case 11:return"succeeded"===y.status?[3,13]:[4,o(i)];case 12:return f.sent(),[2,[null,{paymentStatus:"creationfailed",note:"Setup intent resulted in invalid status(".concat(y.status,")")}]];case 13:return[4,o(i)];case 14:return f.sent(),[2,[y.payment_method,{}]]}}))}))},confirm:function(e,t){var n,r;return(0,a.mG)(this,void 0,void 0,(function(){var i,o,s,c,l,u,d;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,(i=e.stripe).retrievePaymentIntent(t)];case 1:return o=a.sent(),s=o.paymentIntent,c=o.error,!s||c?[2,[null,{note:null!==(n=null==c?void 0:c.message)&&void 0!==n?n:"Failed to retrieve payment intent."}]]:"succeeded"===s.status||"requires_capture"===s.status?[2,["success",{}]]:"requires_action"!==s.status?[3,3]:[4,i.confirmCardPayment(t)];case 2:if(l=a.sent(),u=l.paymentIntent,d=l.error,!u||d)return[2,[null,{note:null!==(r=null==d?void 0:d.message)&&void 0!==r?r:"Failed to confirm payment intent."}]];if("succeeded"===u.status||"requires_capture"===u.status)return[2,["success",{}]];a.label=3;case 3:return[2,[null,{note:"Failed to confirm payment intent with status(".concat(s.status,")")}]]}}))}))}}}();n.googlepay=v}var w={methods:{}};try{for(var x=(0,a.XA)(Object.entries(n)),k=x.next();!k.done;k=x.next()){var F=(0,a.CR)(k.value,2),J=F[0],H=F[1];w.methods[J]=H.config}}catch(t){e={error:t}}finally{try{k&&!k.done&&(t=x.return)&&t.call(x)}finally{if(e)throw e.error}}return L.h.dispatch((0,b.DK)({stripe:w})),n}(),[4,ue(o,s,e)]):[2];case 2:return l.sent(),F(),self.addEventListener("pp-update-afterpay-branding",(function(){return(0,a.mG)(c,void 0,void 0,(function(){var e;return(0,a.Jh)(this,(function(t){return s.afterpay_clearpay&&(e=function(e){void 0===e&&(e=null);var t=N(e);(0,m.MW)('#pp-pms-new .pp-pm-type[data-provider="stripe"][data-method="afterpay_clearpay"] > span',(function(e){e.innerHTML=t})),(0,m.MW)('#pp-pms-new .pp-pm-more li[data-provider="stripe"][data-method="afterpay_clearpay"] > span',(function(e){e.innerHTML=t})),(0,m.MW)('#pp-pms-existing-container .pp-pm-selected-option[data-provider="stripe"][data-method="afterpay_clearpay"] span.pp-pm-display-title',(function(e){e.innerHTML=t})),(0,m.MW)('#pp-pms-existing .pp-pm-type[data-provider="stripe"][data-method="afterpay_clearpay"] > span',(function(e){e.innerHTML=t}));var n=q(e);return(0,m.MW)('#pp-pms-existing-container .pp-pm-selected-option[data-provider="stripe"][data-method="afterpay_clearpay"] img',(function(e){n&&e.setAttribute("src",n)})),{name:t,titleImage:n}}(),s.afterpay_clearpay.config.name=e.name,s.afterpay_clearpay.config.assets.title&&(s.afterpay_clearpay.config.assets.title.src=e.titleImage.length?e.titleImage:s.afterpay_clearpay.config.assets.title.src)),[2]}))}))})),[2]}}))}))}function ue(e,t,n){return(0,a.mG)(this,void 0,void 0,(function(){var r,i,o,s,c,l,u,d;return(0,a.Jh)(this,(function(p){switch(p.label){case 0:r=[];try{for(i=(0,a.XA)(Object.entries(t)),o=i.next();!o.done;o=i.next())s=(0,a.CR)(o.value,2),s[0],(c=s[1]).init&&r.push(c.init(e))}catch(e){u={error:e}}finally{try{o&&!o.done&&(d=i.return)&&d.call(i)}finally{if(u)throw u.error}}return[4,Promise.all(r)];case 1:return p.sent(),l=function(r){if((0,f.N6)()){var i=r.target;if(null==i?void 0:i.closest("button")){var o=t[b.hv.selectedProviderMethod()];if(o&&"stripe"===b.hv.selectedProvider())return function(e,t,n){var r,i;return(0,a.mG)(this,void 0,void 0,(function(){var o,s,c,l,u,d,p,m,f,h,M,k,S,F,P,A,z,D;return(0,a.Jh)(this,(function(I){switch(I.label){case 0:return L.h.dispatch((0,g.N5)()),[4,t.tokenize(e,w.Z5.sessionId())];case 1:return o=a.CR.apply(void 0,[I.sent(),2]),s=o[0],c=o[1],!s&&c.note&&de(t,null!==(r=c.note)&&void 0!==r?r:""),[4,n.startTransaction(t.config.gateway)];case 2:return(l=I.sent())?s?[3,4]:[4,l.complete(c)]:(L.h.dispatch((0,g.tv)()),[2]);case 3:return I.sent(),L.h.dispatch((0,g.tv)()),[2];case 4:return[4,n.placeOrder(l,{peachpay_session_id:w.Z5.sessionId(),peachpay_transaction_id:l.getId(),peachpay_stripe_payment_method_id:s})];case 5:return"failure"!==(u=I.sent()).result?[3,7]:[4,null==l?void 0:l.complete()];case 6:return I.sent(),L.h.dispatch((0,g.tv)()),[2];case 7:return""!==(d=new URL(u.redirect)).hash?[3,10]:[4,l.complete()];case 8:return I.sent(),L.h.dispatch((0,_.ud)({provider:b.hv.selectedProvider(),method:b.hv.selectedProviderMethod()})),[4,(0,v.ll)()];case 9:I.sent(),(0,x.c)(),window.top.location.href=d,I.label=10;case 10:return p=(0,a.CR)(d.hash.split("="),2),m=p[0],f=p[1],"#payment_data"===m&&f?[3,12]:[4,l.complete()];case 11:return I.sent(),L.h.dispatch((0,g.tv)()),[2];case 12:h=JSON.parse(atob(decodeURIComponent(f))),M=h.data.client_secret,k=h.intermediate_url,S=h.success_url,I.label=13;case 13:return I.trys.push([13,21,,24]),[4,t.confirm(e,M,k)];case 14:return F=a.CR.apply(void 0,[I.sent(),2]),P=F[0],A=F[1],!P&&A.note&&de(t,null!==(i=A.note)&&void 0!==i?i:""),[4,l.complete(A)];case 15:if(I.sent(),!P)return L.h.dispatch((0,g.tv)()),[2];L.h.dispatch((0,_.ud)({provider:b.hv.selectedProvider(),method:b.hv.selectedProviderMethod()})),I.label=16;case 16:return I.trys.push([16,18,,20]),[4,(0,v.ll)()];case 17:return I.sent(),[3,20];case 18:return z=I.sent(),console.error(z),[4,l.complete({note:"Failed to update customer in browser :: ".concat((0,y.H)(z))})];case 19:return I.sent(),[3,20];case 20:return(0,x.c)(),"success"===P&&(window.top.location.href=S),[3,24];case 21:return(D=I.sent())instanceof Error?[4,l.complete({note:D.message,paymentStatus:"failed"})]:[3,23];case 22:I.sent(),I.label=23;case 23:return L.h.dispatch((0,g.tv)()),[3,24];case 24:return[2]}}))}))}(e,o,n)}}},(0,m.HD)(".stripe-btn",(function(e){e.addEventListener("click",(function(e){return l(e)}))})),[2]}}))}))}function de(e,t){var n,a,r,i;(0,m.HD)(".pp-pm-error-text",(function(e){e.remove()})),"returning"===g.qA.modalUI.page()&&(0,h.yH)("payment");var o=null!==(i=null===(r=Object.entries(null!==(a=null===(n=b.hv.data().providers.stripe)||void 0===n?void 0:n.methods)&&void 0!==a?a:{}).find((function(t){return t[1].slug===e.config.slug})))||void 0===r?void 0:r[0])&&void 0!==i?i:"";(0,m.HD)('div.pp-pm-saved-option[data-provider="stripe"][data-method="'.concat(o,'"][data-index=""]'),(function(e){e.insertAdjacentHTML("afterend",'<div class="pp-pm-error-text"><span>'.concat(t,"</span></div>"))})),(0,m.MW)("#pp-selected-pm",(function(e){e.insertAdjacentHTML("beforeend",'<div class="pp-pm-error-text"><span>'.concat(t,"</span></div>"))})),setTimeout((function(){(0,m.HD)(".pp-pm-error-text",(function(e){e.remove()}))}),5e3)}},6857:(e,t,n)=>{e.exports=n.p+"img/d0db1eb027413f38ddb3-apple-pay.svg"},8883:(e,t,n)=>{e.exports=n.p+"img/d2a66f3e82ab3efab425-card.svg"},410:(e,t,n)=>{e.exports=n.p+"img/7aba4ceea17fbd040a20-google-pay.svg"},1924:(e,t,n)=>{e.exports=n.p+"img/070ee8f2835a668d3bed-afterpay.svg"},3041:(e,t,n)=>{e.exports=n.p+"img/0a580c7c9daca59b189c-apple-pay.svg"},9402:(e,t,n)=>{e.exports=n.p+"img/e7542fee9125d1af4d23-bank.svg"},5792:(e,t,n)=>{e.exports=n.p+"img/b2c8b12eb49165de87d5-credit-card-regular.svg"},3172:(e,t,n)=>{e.exports=n.p+"img/b6a9922efb467e7f87c3-google-pay.svg"}}]);