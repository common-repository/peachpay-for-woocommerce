{"version":3,"file":"peachpay_stripe_sepadebit-blocks.js","mappings":"oFAAA,IAAIA,EAAS,2BACTC,EAAe,4CACfC,EAA0B,mJA2C1BC,EAAgB,KA8DhBC,EAAkBC,QAAQC,UAAUC,MAAK,WAC3C,OA9DmCC,EA8DjB,KA5DI,OAAlBL,IAIJA,EAAgB,IAAIE,SAAQ,SAAUC,EAASG,GAC7C,GAAsB,oBAAXC,QAA8C,oBAAbC,SAW5C,GAJID,OAAOE,QAAUJ,GACnBK,QAAQC,KAAKZ,GAGXQ,OAAOE,OACTN,EAAQI,OAAOE,aAIjB,IACE,IAAIG,EAnEO,WAGf,IAFA,IAAIC,EAAUL,SAASM,iBAAiB,gBAAiBC,OAAOlB,EAAQ,OAE/DmB,EAAI,EAAGA,EAAIH,EAAQI,OAAQD,IAAK,CACvC,IAAIJ,EAASC,EAAQG,GAErB,GAAKlB,EAAaoB,KAAKN,EAAOO,KAI9B,OAAOP,CACT,CAEA,OAAO,IACT,CAqDmBQ,GAETR,GAAUP,EACZK,QAAQC,KAAKZ,GACHa,IACVA,EAxDW,SAAsBP,GACvC,IAAIgB,EAAchB,IAAWA,EAAOiB,qBAAuB,8BAAgC,GACvFV,EAASJ,SAASe,cAAc,UACpCX,EAAOO,IAAM,GAAGJ,OAAOlB,GAAQkB,OAAOM,GACtC,IAAIG,EAAahB,SAASiB,MAAQjB,SAASkB,KAE3C,IAAKF,EACH,MAAM,IAAIG,MAAM,+EAIlB,OADAH,EAAWI,YAAYhB,GAChBA,CACT,CA4CiBiB,CAAaxB,IAGxBO,EAAOkB,iBAAiB,QAAQ,WAC1BvB,OAAOE,OACTN,EAAQI,OAAOE,QAEfH,EAAO,IAAIqB,MAAM,2BAErB,IACAf,EAAOkB,iBAAiB,SAAS,WAC/BxB,EAAO,IAAIqB,MAAM,4BACnB,GACF,CAAE,MAAOI,GAEP,YADAzB,EAAOyB,EAET,MAnCE5B,EAAQ,KAoCZ,KA3CSH,EAHM,IAAoBK,CA+DrC,IACI2B,GAAa,EACjB/B,EAAuB,OAAE,SAAUgC,GAC5BD,GACHtB,QAAQC,KAAKsB,EAEjB,IACA,IAAIC,EAAa,WACf,IAAK,IAAIC,EAAOC,UAAUnB,OAAQoB,EAAO,IAAIC,MAAMH,GAAOI,EAAO,EAAGA,EAAOJ,EAAMI,IAC/EF,EAAKE,GAAQH,UAAUG,GAGzBP,GAAa,EACb,IAAIQ,EAAYC,KAAKC,MACrB,OAAOzC,EAAgBG,MAAK,SAAUuC,GACpC,OA7Ba,SAAoBA,EAAaN,EAAMG,GACtD,GAAoB,OAAhBG,EACF,OAAO,KAGT,IAAIC,EAASD,EAAYE,WAAMC,EAAWT,GAE1C,OArEoB,SAAyBO,EAAQJ,GAChDI,GAAWA,EAAOG,kBAIvBH,EAAOG,iBAAiB,CACtBC,KAAM,YACNC,QAAS,QACTT,UAAWA,GAEf,CA0DEU,CAAgBN,EAAQJ,GACjBI,CACT,CAqBWO,CAAWR,EAAaN,EAAMG,EACvC,GACF,C,oFC3He,SAASY,EAAiBC,GAUxC,OAAOA,EAAMC,UACZ/B,EAAAA,EAAAA,eAAA,OAAKgC,MAAO,CAACC,QAAS,OAAQC,cAAe,YAC5ClC,EAAAA,EAAAA,eAAA,KAAGgC,MAAO,CAACG,UAAW,UAAWC,OAAQ,aAAcC,SAAU,YAC/DP,EAAML,KAAK,KAAEa,EAAAA,EAAAA,IAAG,2DAA4D,4BAA4B,KAACtC,EAAAA,EAAAA,eAAA,UAAIsC,EAAAA,EAAAA,IAAG,YAAa,4BAA4B,IAAER,EAAMC,UAAa,KAAEO,EAAAA,EAAAA,IAAG,oCAAqC,8BAE1NtC,EAAAA,EAAAA,eAAA,UAAQuC,KAAK,SAASC,UAAU,kCAAkCR,MAAO,CAACK,SAAU,UAAWI,aAAc,QAC5GC,QAfH,WACMZ,EAAMC,YAIXY,EAAAA,EAAAA,GAA6Bb,EAAMC,UACnC/C,OAAO4D,SAASC,SACjB,IASIP,EAAAA,EAAAA,IAAG,YAAa,4BAA4B,IAAER,EAAMC,WAEpD,IACL,C,gKCRMtD,EAAa,eAAAqE,GAAAC,EAAAA,EAAAA,GAAAC,IAAAA,MAAG,SAAAC,EAAOC,EAAoBC,GAAqB,OAAAH,IAAAA,MAAA,SAAAI,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAG,OAAA,SACrE,IAAI5E,SAAgC,SAAAC,GACnC,IACC,GAAII,OAAOwE,gBAEV,YADA5E,EAAQI,OAAOwE,iBAIhBxE,OAAOwE,iBAAkB7C,EAAAA,EAAAA,GAAWuC,EAAY,CAC/CO,OAAQ,OACRN,kBAGDvE,EAAQI,OAAOwE,gBAChB,CAAE,MAAOhD,GACR5B,EAAS4B,EAAgBkD,QAC1B,CACD,KAAE,wBAAAN,EAAAO,OAAA,GAAAV,EAAA,qBAjBgBW,GAAAC,GAAA,OAAAf,EAAAxB,MAAA,KAAAT,UAAA,KA0BbiD,EAA+BC,EAAAA,EAAEC,OAAO,CAC7CC,qBAAsBF,EAAAA,EAAEC,OAAO,CAC9BE,cAAeH,EAAAA,EAAEI,aAEhB,SAEYC,EAAiBC,GAAA,OAAAC,EAAAhD,MAAC,KAADT,UAAA,UAAAyD,IAyB/B,OAzB+BA,GAAAvB,EAAAA,EAAAA,GAAAC,IAAAA,MAAhC,SAAAuB,EAAiCzF,GAA+B,IAAA0F,EAAAC,EAAAjE,EAAAkE,EAAAC,EAAA,OAAA3B,IAAAA,MAAA,SAAA4B,GAAA,cAAAA,EAAAvB,KAAAuB,EAAAtB,MAAA,OAO9D,OANKkB,EAAW,IAAIK,UACZC,OAAO,WAAYhG,EAAOiG,oBACnCP,EAASM,OAAO,sBAAuBhG,EAAOkG,qBAE1ClG,EAAOmG,mBACVT,EAASM,OAAO,iBAAkBhG,EAAOmG,mBACzCL,EAAAtB,KAAA,GAE6B4B,EAAAA,EAAAA,IAAiCpG,EAAOqG,iBAAkB,CACvFC,OAAQ,OACRjF,KAAMqE,IACL,OAHkB,GAGlBC,EAAAG,EAAAS,KAHK7E,EAAKiE,EAALjE,MAAOkE,EAAMD,EAANC,QAKVlE,GAAUkE,SAAAA,EAAQY,KAAI,CAAAV,EAAAtB,KAAA,gBAAAsB,EAAArB,OAAA,SAClB,MAAI,QAGiE,IAAvEoB,EAAoBb,EAA6ByB,UAAUb,EAAOY,OAEjDE,QAAS,CAAFZ,EAAAtB,KAAA,gBAAAsB,EAAArB,OAAA,SACtB,MAAI,eAAAqB,EAAArB,OAAA,SAGLoB,EAAkBW,MAAI,yBAAAV,EAAAjB,OAAA,GAAAY,EAAA,MAC7BjD,MAAA,KAAAT,UAAA,CAED,SAAS4E,EAAiBC,GACzB,IAOIC,EAPEC,EAAqB7B,EAAAA,EAAEC,OAAO,CACnCsB,KAAMvB,EAAAA,EAAEC,OAAO,CAACE,cAAeH,EAAAA,EAAEI,WACjC0B,iBAAkB9B,EAAAA,EAAEI,SACpB2B,YAAa/B,EAAAA,EAAEI,SACf4B,eAAgBhC,EAAAA,EAAEI,WAInB,IACCwB,EAAcK,KAAKC,MAAMC,KAAKC,mBAAmBT,IAClD,CAAE,MAAOlF,GAER,OADArB,QAAQqB,MAAMA,GACP,IACR,CAEA,IAAM4F,EAAaR,EAAmBL,UAAUI,GAEhD,OAAKS,EAAWZ,QAKTY,EAAWd,MAJjBnG,QAAQqB,MAAM4F,EAAW5F,OAClB,KAIT,C,sBClGA,SAASmC,EAA6B0D,GACrCpH,SAASqH,OAAU,sBAAqBD,UACzC,C,qDCIO,SAASE,EAAe/F,GAC9B,GAAIA,aAAiBJ,OAASI,EAAMgG,MACnC,OAAOhG,EAAMgG,MAGd,IAAMC,EAAcT,KAAKU,UAAUlG,GACnC,OAAOiG,GAA+B,OAAhBA,EAAuBA,EAAe,GAAEjG,GAC/D,CAKO,SAASmG,EAAgBC,GAC/B,OAGD,SAA6BA,GAC5B,GAWD,SAA6BA,GAC5B,MACwB,iBAAhBA,GACc,OAAhBA,GACA,YAAaA,GACkB,iBAAxBA,EAAYlD,OAE1B,CAlBKmD,CAAoBD,GACvB,OAAOA,EAGR,IACC,OAAO,IAAIxG,MAAM4F,KAAKU,UAAUE,GACjC,CAAE,MAAAE,GACD,OAAO,IAAI1G,MAAM2G,OAAOH,GACzB,CACD,CAbQI,CAAoBJ,GAAalD,OACzC,C,8ICGC,SAWcwB,EAAY+B,EAAAC,GAAA,OAAAC,EAAA7F,MAAA,KAAAT,UAAA,UAAAsG,IAsB1B,OAtB0BA,GAAApE,EAAAA,EAAAA,GAAAC,IAAAA,MAA3B,SAAAoE,EAAuDC,EAA0BC,GAA8B,IAAAC,EAAAC,EAAA3G,UAAA,OAAAmC,IAAAA,MAAA,SAAAyE,GAAA,cAAAA,EAAApE,KAAAoE,EAAAnE,MAAA,OAAoC,OAAlCiE,EAAaC,EAAA9H,OAAA,QAAA6B,IAAAiG,EAAA,GAAAA,EAAA,GAAG,yBAAkBC,EAAAlE,OAAA,SAC3ImE,MAAML,EAAOC,GAClBzI,KAAI,eAAA8I,GAAA5E,EAAAA,EAAAA,GAAAC,IAAAA,MAAC,SAAA4E,EAAMC,GAAQ,OAAA7E,IAAAA,MAAA,SAAA8E,GAAA,cAAAA,EAAAzE,KAAAyE,EAAAxE,MAAA,cAAAwE,EAAAvE,OAAA,SAAIsE,EAASE,QAAM,wBAAAD,EAAAnE,OAAA,GAAAiE,EAAA,qBAAAI,GAAA,OAAAL,EAAArG,MAAA,KAAAT,UAAA,EAAlC,IACJhC,MAAK,SAAAoJ,GACL,IACC,MAAO,CAACvD,OAAQsB,KAAKC,MAAMgC,GAC5B,CAAE,MAAOzH,GAER,IAAM0H,EAAoBX,EAAcY,KAAKF,GAE7C,OAA0B,OAAtBC,GAA+BA,EAAkB,IAMrD/I,QAAQiJ,IAAI,mCACZjJ,QAAQiJ,IAAIH,GACL,CAACvD,OAAQsB,KAAKC,MAAMiC,EAAkB,OAP5C/I,QAAQiJ,IAAI,gCAEL,CAAC5H,SAMV,CACD,IACC6H,OAAM,SAAC7H,GAAc,MAAM,CAACA,QAAM,KAAoB,wBAAAiH,EAAA9D,OAAA,GAAAyD,EAAA,KACxDD,EAAA7F,MAAA,KAAAT,UAAA,C,iBCxDDyH,EAAOC,QAAUvJ,OAAc,K,kBCA/BsJ,EAAOC,QAAUvJ,OAA2B,kB,iBCA5CsJ,EAAOC,QAAUvJ,OAAiC,wB,kBCAlDsJ,EAAOC,QAAUvJ,OAAW,GAAoB,gB,kBCAhDsJ,EAAOC,QAAUvJ,OAAW,GAAc,U,kBCA1CsJ,EAAOC,QAAUvJ,OAAW,GAAgB,Y,kBCA5CsJ,EAAOC,QAAUvJ,OAAW,GAAQ,I,sBCArB,SAASwJ,EAAkBC,EAAKC,IAClC,MAAPA,GAAeA,EAAMD,EAAI/I,UAAQgJ,EAAMD,EAAI/I,QAC/C,IAAK,IAAID,EAAI,EAAGkJ,EAAO,IAAI5H,MAAM2H,GAAMjJ,EAAIiJ,EAAKjJ,IAAKkJ,EAAKlJ,GAAKgJ,EAAIhJ,GACnE,OAAOkJ,CACT,C,qDCJe,SAASC,EAAgBH,GACtC,GAAI1H,MAAM8H,QAAQJ,GAAM,OAAOA,CACjC,C,qDCFA,SAASK,EAAmBC,EAAKnK,EAASG,EAAQiK,EAAOC,EAAQC,EAAKC,GACpE,IACE,IAAIC,EAAOL,EAAIG,GAAKC,GAChBE,EAAQD,EAAKC,KACnB,CAAE,MAAO7I,GAEP,YADAzB,EAAOyB,EAET,CACI4I,EAAKE,KACP1K,EAAQyK,GAER1K,QAAQC,QAAQyK,GAAOxK,KAAKmK,EAAOC,EAEvC,CACe,SAASlG,EAAkBwG,GACxC,OAAO,WACL,IAAIC,EAAOC,KACT3I,EAAOD,UACT,OAAO,IAAIlC,SAAQ,SAAUC,EAASG,GACpC,IAAIgK,EAAMQ,EAAGjI,MAAMkI,EAAM1I,GACzB,SAASkI,EAAMK,GACbP,EAAmBC,EAAKnK,EAASG,EAAQiK,EAAOC,EAAQ,OAAQI,EAClE,CACA,SAASJ,EAAOvI,GACdoI,EAAmBC,EAAKnK,EAASG,EAAQiK,EAAOC,EAAQ,QAASvI,EACnE,CACAsI,OAAMzH,EACR,GACF,CACF,C,qDC7Be,SAASmI,EAAsBC,EAAGC,GAC/C,IAAIC,EAAI,MAAQF,EAAI,KAAO,oBAAsBG,QAAUH,EAAEG,OAAOC,WAAaJ,EAAE,cACnF,GAAI,MAAQE,EAAG,CACb,IAAIG,EACFC,EACAxK,EACAyK,EACAC,EAAI,GACJC,GAAI,EACJC,GAAI,EACN,IACE,GAAI5K,GAAKoK,EAAIA,EAAES,KAAKX,IAAIrG,KAAM,IAAMsG,EAAG,CACrC,GAAIW,OAAOV,KAAOA,EAAG,OACrBO,GAAI,CACN,MAAO,OAASA,GAAKJ,EAAIvK,EAAE6K,KAAKT,IAAIP,QAAUa,EAAEK,KAAKR,EAAEX,OAAQc,EAAEzK,SAAWkK,GAAIQ,GAAI,GACtF,CAAE,MAAOT,GACPU,GAAI,EAAIJ,EAAIN,CACd,CAAE,QACA,IACE,IAAKS,GAAK,MAAQP,EAAU,SAAMK,EAAIL,EAAU,SAAKU,OAAOL,KAAOA,GAAI,MACzE,CAAE,QACA,GAAIG,EAAG,MAAMJ,CACf,CACF,CACA,OAAOE,CACT,CACF,C,qDC1Be,SAASM,IACtB,MAAM,IAAIC,UAAU,4IACtB,C,6HCEe,SAASC,EAAelC,EAAKhJ,GAC1C,OAAO,OAAegJ,KAAQ,OAAqBA,EAAKhJ,KAAM,OAA2BgJ,EAAKhJ,KAAM,QACtG,C,mECLe,SAASmL,EAA4BP,EAAGQ,GACrD,GAAKR,EAAL,CACA,GAAiB,iBAANA,EAAgB,OAAO,OAAiBA,EAAGQ,GACtD,IAAIZ,EAAIM,OAAOO,UAAUC,SAAST,KAAKD,GAAGW,MAAM,GAAI,GAEpD,MADU,WAANf,GAAkBI,EAAEY,cAAahB,EAAII,EAAEY,YAAYxJ,MAC7C,QAANwI,GAAqB,QAANA,EAAoBlJ,MAAMmK,KAAKb,GACxC,cAANJ,GAAqB,2CAA2CtK,KAAKsK,IAAW,OAAiBI,EAAGQ,QAAxG,CALc,CAMhB,C,GCPIM,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB9J,IAAjB+J,EACH,OAAOA,EAAa/C,QAGrB,IAAID,EAAS6C,EAAyBE,GAAY,CAGjD9C,QAAS,CAAC,GAOX,OAHAgD,EAAoBF,GAAU/C,EAAQA,EAAOC,QAAS6C,GAG/C9C,EAAOC,OACf,CCrBA6C,EAAoBnB,EAAI,SAAS3B,GAChC,IAAIkD,EAASlD,GAAUA,EAAOmD,WAC7B,WAAa,OAAOnD,EAAgB,OAAG,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADA8C,EAAoBM,EAAEF,EAAQ,CAAErB,EAAGqB,IAC5BA,CACR,ECNAJ,EAAoBM,EAAI,SAASnD,EAASoD,GACzC,IAAI,IAAIzC,KAAOyC,EACXP,EAAoBf,EAAEsB,EAAYzC,KAASkC,EAAoBf,EAAE9B,EAASW,IAC5EqB,OAAOqB,eAAerD,EAASW,EAAK,CAAE2C,YAAY,EAAMC,IAAKH,EAAWzC,IAG3E,ECPAkC,EAAoBf,EAAI,SAAS0B,EAAKC,GAAQ,OAAOzB,OAAOO,UAAUmB,eAAe3B,KAAKyB,EAAKC,EAAO,E,kICwBhGE,EAZiBnI,EAAAA,EAAEC,OAAO,CAC/BmI,MAAOpI,EAAAA,EAAEI,SACTiI,SAAUrI,EAAAA,EAAEI,SACZkI,WAAYtI,EAAAA,EAAEI,SACdmI,SAAUvI,EAAAA,EAAEI,SAASoI,QACrBC,WAAYzI,EAAAA,EAAEI,SACdjB,WAAYa,EAAAA,EAAEI,SACdgB,iBAAkBpB,EAAAA,EAAEI,SACpBY,mBAAoBhB,EAAAA,EAAEI,SACtBsI,2BAA4B1I,EAAAA,EAAEI,SAASuI,aAGJnH,WACnCoH,EAAAA,EAAAA,YAAW,kCAAkC,IAG9C,IAAKT,EAAa1G,QACjB,MAAM,IAAIpF,MAAO,+DAA8D8L,EAAa1L,MAAMkD,WAGnG,IAAMkJ,EAAWV,EAAa5G,KACxB6G,GAAQU,EAAAA,EAAAA,gBAAeD,EAAST,QAEtCxL,EAAAA,EAAAA,IAAWiM,EAAS1J,WAAY0J,EAASJ,YACvC3N,MAAK,SAAAwC,GACL,GAAe,OAAXA,EACH,MAAM,IAAIjB,MAAM,kBAGjB,GAAsB,iBAAXiB,EACV,MAAM,IAAIjB,MAAMiB,GAGjB,IAWMyL,EAAczL,EAAO0L,WAAWC,OAAO,OAX7B,CACfhL,MAAO,CACNiL,KAAM,CACLC,MAAO,UACP7K,SAAU,SAIZ8K,mBAAoB,CAAC,UAQhBC,EAAU,SAACC,GAChB,IAAOC,EAA4CD,EAA5CC,aAAcC,EAA8BF,EAA9BE,kBAAmBC,EAAWH,EAAXG,QACjCC,EAAqDF,EAArDE,eAAgBC,EAAqCH,EAArCG,kBAAmBC,EAAkBJ,EAAlBI,eAEpCC,GAAeC,EAAAA,EAAAA,QAA8B,MA0PnD,OAxPAC,EAAAA,EAAAA,YAAU,WACLF,EAAaG,UAChBH,EAAaG,QAAQC,UAAY,GACjClB,EAAYmB,MAAML,EAAaG,SAEjC,GAAG,KAEHD,EAAAA,EAAAA,YAAU,WAgJT,OA/IoBL,GAAc1K,EAAAA,EAAAA,GAAAC,IAAAA,MAAC,SAAAC,IAAA,IAAAiL,EAAAC,EAAAC,EAAAC,EAAAC,EAAA9N,EAAA+N,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAnM,IAAAA,MAAA,SAAAI,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,GAC6B8L,EAAAA,EAAAA,kBAAiB,6BAA4B,OAAzE,GAAyElB,EAAA9K,EAAAiC,KAA7F8I,EAAaD,EAArBxJ,SAA8B0J,EAAgBF,EAAvB1N,OAER,CAAF4C,EAAAE,KAAA,eAAAF,EAAAG,OAAA,SACZ,CACNhB,KAAM+K,EAAa+B,cAAcC,MACjC5L,SAASiD,EAAAA,EAAAA,IAAgByH,KACzB,eAGoB7M,IAAlB4M,EAA2B,CAAA/K,EAAAE,KAAA,eAAAF,EAAAG,OAAA,SACvB,CACNhB,KAAM+K,EAAa+B,cAAcC,MACjC5L,SAASpB,EAAAA,EAAAA,IAAG,yBAA0B,8BACtC,cAAAc,EAAAC,KAAA,EAAAD,EAAAE,KAAA,GAIoCjC,EAAOkO,oBAAoB,CAC/DhN,KAAM,aACNiN,WAAY1C,EACZ2C,gBAAiB,CAChBC,QAAS,CACRC,KAAMnC,EAAQoC,eAAeD,KAC7BE,QAASrC,EAAQoC,eAAeC,QAChCC,MAAOtC,EAAQoC,eAAeG,UAC9BC,MAAOxC,EAAQoC,eAAeK,UAC9BC,YAAa1C,EAAQoC,eAAeO,SACpCC,MAAO5C,EAAQoC,eAAeQ,OAE/BC,MAAO7C,EAAQoC,eAAeS,MAC9B5O,KAAM+L,EAAQoC,eAAeU,WAAa,IAAM9C,EAAQoC,eAAeW,UACvEC,MAAOhD,EAAQoC,eAAeY,SAE9B,QAhByB,GAgBzBnC,EAAAjL,EAAAiC,KAhBKiJ,EAAaD,EAAbC,gBAAe9N,EAAK6N,EAAL7N,OAkBX,CAAF4C,EAAAE,KAAA,SAC0F,OAA5FkL,EAAoB,QAAhBD,EAAG/N,EAAMkD,eAAO,IAAA6K,EAAAA,GAAIjM,EAAAA,EAAAA,IAAG,qCAAsC,4BAA2Bc,EAAAE,KAAA,IAC5FmN,EAAAA,EAAAA,mBAAkBtC,EAAe,CAACK,SAAM,eAAApL,EAAAG,OAAA,SACvC,CACNhB,KAAM+K,EAAa+B,cAAcC,MACjC5L,QAAS8K,IACT,WAGGF,EAAcoC,GAAI,CAAFtN,EAAAE,KAAA,SACyE,OAAvFkL,GAAOlM,EAAAA,EAAAA,IAAG,iDAAkD,4BAA2Bc,EAAAE,KAAA,IACvFmN,EAAAA,EAAAA,mBAAkBtC,EAAe,CAACK,KAAAA,IAAM,eAAApL,EAAAG,OAAA,SACvC,CACNhB,KAAM+K,EAAa+B,cAAcC,MACjC5L,QAAS8K,IACT,aAGEhB,EAAQmD,UAAUtH,MAAQ,GAAC,CAAAjG,EAAAE,KAAA,gBAAAF,EAAAG,OAAA,SACvB,CACNhB,KAAM+K,EAAa+B,cAAcuB,QACjCC,KAAM,CACLC,kBAAmB,CAClBC,wBAAyB5C,EACzB6C,kCAAmC1C,EAAcoC,OAGnD,eAAAtN,EAAAE,KAAA,IAGwBc,EAAAA,EAAAA,IAAkB,CAC3CY,oBAAqB,aACrBC,kBAAmBqJ,EAAcoC,GACjCvL,iBAAkByH,EAASzH,iBAC3BJ,mBAAoB6H,EAAS7H,qBAC5B,QALe,GAOG,QAPd2J,EAAWtL,EAAAiC,MAOO,CAAAjC,EAAAE,KAAA,SACsD,OAAvEkL,GAAOlM,EAAAA,EAAAA,IAAG,iCAAkC,4BAA2Bc,EAAAE,KAAA,IACvEmN,EAAAA,EAAAA,mBAAkBtC,EAAe,CAACK,KAAAA,IAAM,eAAApL,EAAAG,OAAA,SACvC,CACNhB,KAAM+K,EAAa+B,cAAcC,MACjC5L,QAAS8K,IACT,eAAApL,EAAAE,KAAA,GAG8DjC,EAAO4P,sBACtEvC,EAAYzK,qBAAqBC,cACjC,CACCgN,eAAgB,CACf1B,WAAY1C,EACZ2C,gBAAiB,CAChBhO,KAAM+L,EAAQoC,eAAeU,WAAa,IAAM9C,EAAQoC,eAAeW,UACvEF,MAAO7C,EAAQoC,eAAeS,UAIjC,QAXsC,GAWtCzB,EAAAxL,EAAAiC,KAXawJ,EAAYD,EAAnBpO,MAAkCsO,EAAaF,EAA1BF,aAaxBG,EAAc,CAAFzL,EAAAE,KAAA,SACuF,OAAhGkL,EAA2B,QAAvBO,EAAGF,EAAanL,eAAO,IAAAqL,EAAAA,GAAIzM,EAAAA,EAAAA,IAAG,kCAAmC,4BAA2Bc,EAAAE,KAAA,IAChGmN,EAAAA,EAAAA,mBAAkBtC,EAAe,CAACK,KAAAA,IAAM,eAAApL,EAAAG,OAAA,SACvC,CACNhB,KAAM+K,EAAa+B,cAAcC,MACjC5L,QAAS8K,IACT,WAG2B,cAAzBM,EAAcqC,OAAsB,CAAA/N,EAAAE,KAAA,SAC8E,OAA/GkL,EAAQ,IAAElM,EAAAA,EAAAA,IAAG,0CAA2C,gCAAgCwM,EAAcqC,UAAS/N,EAAAE,KAAA,IAC/GmN,EAAAA,EAAAA,mBAAkBtC,EAAe,CAACK,KAAAA,IAAM,eAAApL,EAAAG,OAAA,SACvC,CACNhB,KAAM+K,EAAa+B,cAAcC,MACjC5L,QAAS8K,IACT,WAIuC,iBAAjCM,EAAcoC,gBAAgE,OAAjCpC,EAAcoC,eAAuB,CAAA9N,EAAAE,KAAA,SAE+B,OAAlHkL,EAAQ,IAAElM,EAAAA,EAAAA,IAAG,8BAA+B,uCAAuCwM,EAAcoC,kBAAiB9N,EAAAE,KAAA,IAClHmN,EAAAA,EAAAA,mBAAkBtC,EAAe,CAACK,KAAAA,IAAM,eAAApL,EAAAG,OAAA,SACvC,CACNhB,KAAM+K,EAAa+B,cAAcC,MACjC5L,QAAS8K,IACT,eAAApL,EAAAG,OAAA,SAGK,CACNhB,KAAM+K,EAAa+B,cAAcuB,QACjCC,KAAM,CACLC,kBAAmB,CAClBC,wBAAyB5C,EACzB6C,kCAAmClC,EAAcoC,mBAGnD,QAEiC,OAFjC9N,EAAAC,KAAA,GAAAD,EAAAgO,GAAAhO,EAAA,SAEKoL,GAAOjI,EAAAA,EAAAA,IAAcnD,EAAAgO,IAAOhO,EAAAE,KAAA,IAC5BmN,EAAAA,EAAAA,mBAAkBtC,EAAe,CAACK,KAAAA,IAAM,eAAApL,EAAAG,OAAA,SACvC,CACNhB,KAAM+K,EAAa+B,cAAcC,MACjC5L,QAAS8K,IACT,yBAAApL,EAAAO,OAAA,GAAAV,EAAA,mBAKJ,GAAG,CAACwK,EAAgBD,EAAQoC,eAAgBpC,EAAQmD,aAEpD7C,EAAAA,EAAAA,YAAU,WACT,IAAMuD,EAAc3D,EAAiB,eAAA/F,GAAA5E,EAAAA,EAAAA,GAAAC,IAAAA,MAAC,SAAAuB,EAAOe,GAA2B,IAAAgM,EAAAC,EAAAC,EAAA/P,EAAAiE,EAAA+L,EAAAC,EAAAC,EAAAC,EAAAC,EAAArR,EAAAsR,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAlP,IAAAA,MAAA,SAAA4B,GAAA,cAAAA,EAAAvB,KAAAuB,EAAAtB,MAAA,OAGzC,GAFxBgO,EAAU,IAAIa,IAAI7M,EAAK8M,aAAYb,EAEPD,EAAQe,KAAKC,MAAM,KAAId,GAAA7G,EAAAA,EAAAA,GAAA4G,EAAA,GAAlD9P,EAAI+P,EAAA,GAAE9L,EAAiB8L,EAAA,GAET,KAAjBF,EAAQe,MAAwB,kBAAT5Q,GAA6BiE,EAAiB,CAAAd,EAAAtB,KAAA,eAAAsB,EAAArB,OAAA,iBAIlB,GAEnC,QAFdkO,GAAchM,EAAAA,EAAAA,IAAiBC,IAEb,CAAAd,EAAAtB,KAAA,eAAAsB,EAAArB,OAAA,SAChB,CACNhB,KAAM+K,EAAa+B,cAAcC,MACjC5L,SAASpB,EAAAA,EAAAA,IAAG,+BAAgC,8BAC5C,OAIwC,OADpCoP,EAAeD,EAAYnM,KAAKpB,cAChCyN,EAAaF,EAAY3L,YAAWlB,EAAAtB,KAAA,GAELjC,EAAOkR,sBAAsBb,GAAa,QAApD,GAAoDE,EAAAhN,EAAAS,KAAxEwM,EAAaD,EAAbC,cAAerR,EAAKoR,EAALpR,MACjBqR,IAAiBrR,EAAK,CAAAoE,EAAAtB,KAAA,gBAAAsB,EAAArB,OAAA,SACnB,CACNhB,KAAM+K,EAAa+B,cAAcC,MACjC5L,QAAuB,QAAhBoO,EAAEtR,aAAK,EAALA,EAAOkD,eAAO,IAAAoO,EAAAA,GAAIxP,EAAAA,EAAAA,IAAG,qCAAsC,4BACpEkQ,eAAgBlF,EAAamF,eAAeC,WAC5C,WAG2B,cAAzBb,EAAcV,QAAmD,qBAAzBU,EAAcV,QAA0D,eAAzBU,EAAcV,OAAuB,CAAAvM,EAAAtB,KAAA,gBAAAsB,EAAArB,OAAA,SACxH,CACNhB,KAAM+K,EAAa+B,cAAcuB,QACjCwB,YAAaT,IACb,WAG2B,oBAAzBE,EAAcV,OAA4B,CAAAvM,EAAAtB,KAAA,gBAAAsB,EAAAtB,KAAA,GACRjC,EAAOsR,wBAAwBjB,GAAa,QAAtD,GAAsDK,EAAAnN,EAAAS,KAA1EwM,EAAaE,EAAbF,cAAerR,EAAKuR,EAALvR,MACjBqR,IAAiBrR,EAAK,CAAAoE,EAAAtB,KAAA,gBAAAsB,EAAArB,OAAA,SACnB,CACNhB,KAAM+K,EAAa+B,cAAcC,MACjC5L,QAAuB,QAAhBwO,EAAE1R,aAAK,EAALA,EAAOkD,eAAO,IAAAwO,EAAAA,GAAI5P,EAAAA,EAAAA,IAAG,oCAAqC,4BACnEkQ,eAAgBlF,EAAamF,eAAeC,WAC5C,WAG2B,cAAzBb,EAAcV,QAAmD,qBAAzBU,EAAcV,QAA0D,eAAzBU,EAAcV,OAAuB,CAAAvM,EAAAtB,KAAA,gBAAAsB,EAAArB,OAAA,SACxH,CACNhB,KAAM+K,EAAa+B,cAAcuB,QACjCwB,YAAaT,IACb,eAAA/M,EAAArB,OAAA,SAII,CACNhB,KAAM+K,EAAa+B,cAAcC,MACjC5L,SAASpB,EAAAA,EAAAA,IAAG,6FAA8F,4BAC1GkQ,eAAgBlF,EAAamF,eAAeC,WAC5C,yBAAA9N,EAAAjB,OAAA,GAAAY,EAAA,KACD,gBAAAX,IAAA,OAAA+D,EAAArG,MAAA,KAAAT,UAAA,EA5DoC,IA8DrC,OAAOwQ,CACR,GAAG,CAAC3D,KAEJI,EAAAA,EAAAA,YAAU,WAyBT,OAxBoBH,GAAe,SAACrI,GAAoD,IAAAsN,EAAAC,EACvF,OAA2B,QAAvBD,EAAAtN,EAAKwN,0BAAkB,IAAAF,OAAA,EAAvBA,EAAyBG,iBAAkBzF,EAAa+B,cAAc2D,KAClE,CACNzQ,KAAM+K,EAAa+B,cAAc2D,KACjCtP,QAAS4B,EAAKwN,mBAAmBG,eAAwB,QACzDT,eAAgBlF,EAAamF,eAAeC,UAIC,aAApB,QAAvBG,EAAAvN,EAAKwN,0BAAkB,IAAAD,OAAA,EAAvBA,EAAyBE,gBAA+BzN,EAAKwN,mBAAmBpP,QAC5E,CACNnB,KAAM,UACNmB,QAAS4B,EAAKwN,mBAAmBpP,QACjC8O,eAAgBlF,EAAamF,eAAeS,UAIvC,CACN3Q,KAAM+K,EAAa+B,cAAcC,MACjC5L,SAASpB,EAAAA,EAAAA,IAAG,qDAAsD,4BAClEkQ,eAAgBlF,EAAamF,eAAeC,SAE9C,GAGD,GAAG,CAAC/E,IAEAf,EAASH,4BACLzM,EAAAA,EAAAA,eAAC6B,EAAAA,EAAgB,CAACJ,KAAM0K,EAAOpK,SAAU6K,EAASH,8BAIzDzM,EAAAA,EAAAA,eAAA,YACCA,EAAAA,EAAAA,eAAA,OAAKmT,IAAKvF,GAAc,eACxB5N,EAAAA,EAAAA,eAAA,KAAGgC,MAAO,CAACK,SAAU,UAAWF,UAAW,UAAWiR,WAAY,SAChExG,EAASP,YAId,GAgBAgH,EAAAA,EAAAA,uBAAsB,CACrBC,UAAWnH,EACXoH,cAAAA,CAAejO,GACd,OAAOA,EAAKkO,eAAeC,SAAS,4BACrC,EAEAC,SAAS1T,EAAAA,EAAAA,eAACoN,EAAO,MAEjBuG,MAAM3T,EAAAA,EAAAA,eAACoN,EAAO,MAEdwG,OAAO5T,EAAAA,EAAAA,gBAxBM,SAAC8B,GACd,IAAA+R,EAAiD/R,EAAMgS,WAAhDC,EAAkBF,EAAlBE,mBAAoBC,EAAkBH,EAAlBG,mBAC3B,OACChU,EAAAA,EAAAA,eAAAiU,EAAAA,SAAA,MACCjU,EAAAA,EAAAA,eAAC+T,EAAkB,CAAChM,KAAMoE,KAC1BnM,EAAAA,EAAAA,eAACgU,EAAkB,CAACE,MAAO,CAAC,CAC3BxD,GAAI,4BACJ9Q,IAAKgN,EAASR,SACd+H,IAAKhI,IACF3J,UAAU,kBAGjB,GAYc,MACbf,KAAM,4BACN6K,SAAU,CACT8H,SAAUxH,EAASN,WAGtB,IACCjE,OAAM,SAAA7H,GACN,MAAMA,CACP,G","sources":["webpack://peachpay-for-woocommerce/./node_modules/@stripe/stripe-js/dist/stripe.esm.js","webpack://peachpay-for-woocommerce/./core/blocks/src/currency-fallback.tsx","webpack://peachpay-for-woocommerce/./core/payments/stripe/blocks/src/stripe.ts","webpack://peachpay-for-woocommerce/./frontend/@shared/ts/currency.ts","webpack://peachpay-for-woocommerce/./frontend/@shared/ts/error.ts","webpack://peachpay-for-woocommerce/./frontend/@shared/ts/maybe.ts","webpack://peachpay-for-woocommerce/external window \"React\"","webpack://peachpay-for-woocommerce/external window \"regeneratorRuntime\"","webpack://peachpay-for-woocommerce/external window [\"peachpay_checkout_blocks\"]","webpack://peachpay-for-woocommerce/external window [\"wc\",\"wcBlocksRegistry\"]","webpack://peachpay-for-woocommerce/external window [\"wc\",\"wcSettings\"]","webpack://peachpay-for-woocommerce/external window [\"wp\",\"htmlEntities\"]","webpack://peachpay-for-woocommerce/external window [\"wp\",\"i18n\"]","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://peachpay-for-woocommerce/webpack/bootstrap","webpack://peachpay-for-woocommerce/webpack/runtime/compat get default export","webpack://peachpay-for-woocommerce/webpack/runtime/define property getters","webpack://peachpay-for-woocommerce/webpack/runtime/hasOwnProperty shorthand","webpack://peachpay-for-woocommerce/./core/payments/stripe/blocks/src/sepadebit/index.tsx"],"sourcesContent":["var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"2.2.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      }\n\n      script.addEventListener('load', function () {\n        if (window.Stripe) {\n          resolve(window.Stripe);\n        } else {\n          reject(new Error('Stripe.js not available'));\n        }\n      });\n      script.addEventListener('error', function () {\n        reject(new Error('Failed to load Stripe.js'));\n      });\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  });\n  return stripePromise;\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n// own script injection.\n\nvar stripePromise$1 = Promise.resolve().then(function () {\n  return loadScript(null);\n});\nvar loadCalled = false;\nstripePromise$1[\"catch\"](function (err) {\n  if (!loadCalled) {\n    console.warn(err);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now();\n  return stripePromise$1.then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","import {peachpayUpdateCurrencyCookie} from '../../../frontend/@shared/ts/currency';\nimport {__} from '@wordpress/i18n';\n\nexport default function CurrencyFallback(props: {name: string; currency: string | null}) {\n\tfunction changeCurrency() {\n\t\tif (!props.currency) {\n\t\t\treturn;\n\t\t}\n\n\t\tpeachpayUpdateCurrencyCookie(props.currency);\n\t\twindow.location.reload();\n\t}\n\n\treturn props.currency ? (\n\t\t<div style={{display: 'flex', flexDirection: 'column'}}>\n\t\t\t<p style={{textAlign: 'justify', margin: '0.5rem 0 0', fontSize: 'smaller'}}>\n\t\t\t\t{props.name} {__('does not support the currency you currently have chosen.', 'peachpay-for-woocommerce')} <b>{__('Update to', 'peachpay-for-woocommerce')} {props.currency}</b> {__('below to use this payment method.', 'peachpay-for-woocommerce')}\n\t\t\t</p>\n\t\t\t<button type='button' className='button currency-fallback-button' style={{fontSize: 'smaller', marginBottom: '16px'}}\n\t\t\t\tonClick={changeCurrency}\n\t\t\t>{__('Update to', 'peachpay-for-woocommerce')} {props.currency}</button>\n\t\t</div>\n\t) : null;\n}\n","import {type Stripe, loadStripe} from '@stripe/stripe-js';\nimport {maybeFetchWP} from '../../../../../frontend/@shared/ts/maybe';\nimport {type IResponse} from '../../../../../frontend/@type/response';\nimport {z} from '@peachpay/checkout-blocks';\n\ndeclare global {\n\tinterface Window {\n\t\t/**\n\t\t * Stripe throws an error after about 10 instances of the stripe object\n\t\t * are created. We store the first instance here so it is shared.\n\t\t */\n\t\tpeachpay_stripe?: Promise<Stripe | null>;\n\t}\n}\n\nconst stripePromise = async (public_key: string, stripeAccount: string) =>\n\tnew Promise<Stripe | string | null>(resolve => {\n\t\ttry {\n\t\t\tif (window.peachpay_stripe) {\n\t\t\t\tresolve(window.peachpay_stripe);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\twindow.peachpay_stripe = loadStripe(public_key, {\n\t\t\t\tlocale: 'auto',\n\t\t\t\tstripeAccount,\n\t\t\t});\n\n\t\t\tresolve(window.peachpay_stripe);\n\t\t} catch (error) {\n\t\t\tresolve((error as Error).message);\n\t\t}\n\t});\n\ntype CreateSetupIntentParams = {\n\tsetup_intent_url: string;\n\tsetup_intent_nonce: string;\n\tpayment_method_type: string;\n\tpayment_method_ID?: string;\n};\n\nconst SetupIntentFetchResultSchema = z.object({\n\tsetup_intent_details: z.object({\n\t\tclient_secret: z.string(),\n\t}),\n});\n\nasync function createSetupIntent(params: CreateSetupIntentParams) {\n\tconst formData = new FormData();\n\tformData.append('security', params.setup_intent_nonce);\n\tformData.append('payment_method_type', params.payment_method_type);\n\n\tif (params.payment_method_ID) {\n\t\tformData.append('payment_method', params.payment_method_ID);\n\t}\n\n\tconst {error, result} = await maybeFetchWP<IResponse<unknown>>(params.setup_intent_url, {\n\t\tmethod: 'POST',\n\t\tbody: formData,\n\t});\n\n\tif (error || !result?.data) {\n\t\treturn null;\n\t}\n\n\tconst setupIntentResult = SetupIntentFetchResultSchema.safeParse(result.data);\n\n\tif (!setupIntentResult.success) {\n\t\treturn null;\n\t}\n\n\treturn setupIntentResult.data;\n}\n\nfunction parsePaymentData(encodedStringData: string) {\n\tconst encodedPaymentData = z.object({\n\t\tdata: z.object({client_secret: z.string()}),\n\t\tintermediate_url: z.string(),\n\t\tsuccess_url: z.string(),\n\t\ttransaction_id: z.string(),\n\t});\n\n\tlet encodedData: unknown;\n\ttry {\n\t\tencodedData = JSON.parse(atob(decodeURIComponent(encodedStringData)));\n\t} catch (error) {\n\t\tconsole.error(error);\n\t\treturn null;\n\t}\n\n\tconst parsedData = encodedPaymentData.safeParse(encodedData);\n\n\tif (!parsedData.success) {\n\t\tconsole.error(parsedData.error);\n\t\treturn null;\n\t}\n\n\treturn parsedData.data;\n}\n\nexport {stripePromise as loadStripe, createSetupIntent, parsePaymentData};\n","function peachpayUpdateCurrencyCookie(newCurrency: string) {\n\tdocument.cookie = `pp_active_currency=${newCurrency};path=/`;\n}\n\nexport {peachpayUpdateCurrencyCookie};\n","/**\n * Gets a stringified error or if the stringified result is an empy string or empty object the default .toString() is used.\n * Created because JSON.stringify(error) will return {} for Error objects (https://stackoverflow.com/a/50738205/16998523).\n *\n * @param {unknown} error\n */\nexport function getErrorString(error: unknown): string {\n\tif (error instanceof Error && error.stack) {\n\t\treturn error.stack;\n\t}\n\n\tconst errorString = JSON.stringify(error);\n\treturn errorString && errorString !== '{}' ? errorString : `${error as string}`;\n}\n\n/**\n * Takes an unknown value and coerces it into an error and finally returns the error message string\n */\nexport function getErrorMessage(thrownError: unknown) {\n\treturn _toErrorWithMessage(thrownError).message;\n}\n\nfunction _toErrorWithMessage(thrownError: unknown): {message: string} {\n\tif (_isErrorWithMessage(thrownError)) {\n\t\treturn thrownError;\n\t}\n\n\ttry {\n\t\treturn new Error(JSON.stringify(thrownError));\n\t} catch {\n\t\treturn new Error(String(thrownError));\n\t}\n}\n\nfunction _isErrorWithMessage(thrownError: unknown): thrownError is {message: string} {\n\treturn (\n\t\ttypeof thrownError === 'object'\n    && thrownError !== null\n    && 'message' in thrownError\n    && typeof thrownError.message === 'string'\n\t);\n}\n\nfunction _isErrorWithName(error: unknown): error is {name: string} {\n\treturn typeof error === 'object' && error !== null && 'name' in error && typeof error.name === 'string';\n}\n\nexport function getErrorName(error: unknown): string | null {\n\tif (_isErrorWithName(error)) {\n\t\treturn error.name;\n\t}\n\n\treturn null;\n}\n","import {type IResponse} from '../../@type/response';\n\ntype Maybe<T> = {result?: T; error?: unknown};\n\n/**\n * Takes a promise and returns a Maybe type of the result or an error. This can be used to\n * avoid try/catch blocks which can be difficult to read and maintain.\n */\nasync function maybe<TResult = IResponse<void>>(promise: Promise<TResult>): Promise<Maybe<TResult>> {\n\treturn promise\n\t\t.then(result => ({result}))\n\t\t.catch((error: unknown) => ({error})) as Maybe<TResult>;\n}\n\n/**\n * Wraps a fetch request and returns a Maybe type of the resulting JSON or an error. This\n * can be used to avoid try/catch blocks which can be difficult to read and maintain.\n */\nasync function maybeFetch<TResult = IResponse<void>>(input: RequestInfo | URL, init?: RequestInit | undefined): Promise<Maybe<TResult>> {\n\treturn fetch(input, init)\n\t\t.then(async response => response.json() as Promise<TResult>)\n\t\t.then(result => ({result}))\n\t\t.catch((error: unknown) => ({error})) as Maybe<TResult>;\n}\n\n/**\n * This is a special version of maybeFetch that is used to fetch data from WordPress. WordPress sometimes\n * has bad plugins which will result in malformed JSON responses. This function will attempt to fix the malformed\n * JSON and return the corrected result.\n *\n * @param input The request URL\n * @param init The request init object\n * @param regexSelector A regex selector that will be used to extract the JSON from the malformed response if one is encountered.\n */\nasync function maybeFetchWP<TResult = IResponse<void>>(input: RequestInfo | URL, init?: RequestInit | undefined, regexSelector = /{\\s*\".*[^{}]*}/gs): Promise<Maybe<TResult>> {\n\treturn fetch(input, init)\n\t\t.then(async response => response.text())\n\t\t.then(jsonText => {\n\t\t\ttry {\n\t\t\t\treturn {result: JSON.parse(jsonText) as TResult} as Maybe<TResult>;\n\t\t\t} catch (error: unknown) {\n\t\t\t\t// Attempt to extract JSON from malformed response json text\n\t\t\t\tconst extractedJSONText = regexSelector.exec(jsonText);\n\n\t\t\t\tif (extractedJSONText === null || !extractedJSONText[0]) {\n\t\t\t\t\tconsole.log('Unable to fix malformed JSON');\n\t\t\t\t\t// Could not fix malformed JSON so just return the original error.\n\t\t\t\t\treturn {error} as Maybe<TResult>;\n\t\t\t\t}\n\n\t\t\t\tconsole.log('Fixed malformed JSON. Original:');\n\t\t\t\tconsole.log(jsonText);\n\t\t\t\treturn {result: JSON.parse(extractedJSONText[0]) as TResult} as Maybe<TResult>;\n\t\t\t}\n\t\t})\n\t\t.catch((error: unknown) => ({error} as Maybe<TResult>));\n}\n\nexport {\n\ttype Maybe,\n\n\tmaybe,\n\tmaybeFetch,\n\tmaybeFetchWP,\n};\n","module.exports = window[\"React\"];","module.exports = window[\"regeneratorRuntime\"];","module.exports = window[\"peachpay_checkout_blocks\"];","module.exports = window[\"wc\"][\"wcBlocksRegistry\"];","module.exports = window[\"wc\"][\"wcSettings\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","module.exports = window[\"wp\"][\"i18n\"];","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","export default function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","import {useRef, useEffect} from 'react';\nimport {__} from '@wordpress/i18n';\nimport {registerPaymentMethod} from '@woocommerce/blocks-registry';\nimport {getSetting} from '@woocommerce/settings';\nimport {decodeEntities} from '@wordpress/html-entities';\nimport {loadStripe, createSetupIntent, parsePaymentData} from '../stripe';\nimport {type PaymentMethodInterface} from '@woocommerce/types';\nimport {startTransaction, updateTransaction, z} from '@peachpay/checkout-blocks';\nimport {type CheckoutAfterProcessingWithErrorEventData} from '@woocommerce/checkout';\nimport CurrencyFallback from '../../../../../blocks/src/currency-fallback';\nimport {getErrorMessage, getErrorString} from '../../../../../../frontend/@shared/ts/error';\n\nconst SettingsSchema = z.object({\n\ttitle: z.string(),\n\ticon_url: z.string(),\n\tconditions: z.string(),\n\tsupports: z.string().array(),\n\tconnect_id: z.string(),\n\tpublic_key: z.string(),\n\tsetup_intent_url: z.string(),\n\tsetup_intent_nonce: z.string(),\n\tcurrency_fallback_required: z.string().nullable(),\n});\n\nconst parsedResult = SettingsSchema.safeParse(\n\tgetSetting('peachpay_stripe_sepadebit_data', false),\n);\n\nif (!parsedResult.success) {\n\tthrow new Error(`PeachPay Stripe SEPA Direct Debit data is not available.\\n\\n${parsedResult.error.message}`);\n}\n\nconst settings = parsedResult.data;\nconst title = decodeEntities(settings.title);\n\nloadStripe(settings.public_key, settings.connect_id)\n\t.then(stripe => {\n\t\tif (stripe === null) {\n\t\t\tthrow new Error('Stripe is null');\n\t\t}\n\n\t\tif (typeof stripe === 'string') {\n\t\t\tthrow new Error(stripe);\n\t\t}\n\n\t\tconst options = {\n\t\t\tstyle: {\n\t\t\t\tbase: {\n\t\t\t\t\tcolor: '#32325d',\n\t\t\t\t\tfontSize: '16px',\n\t\t\t\t},\n\t\t\t},\n\n\t\t\tsupportedCountries: ['SEPA'],\n\t\t};\n\n\t\tconst ibanElement = stripe.elements().create('iban', options);\n\n\t\t/**\n\t\t * Content component\n\t\t */\n\t\tconst Content = (context: PaymentMethodInterface) => {\n\t\t\tconst {emitResponse, eventRegistration, billing} = context;\n\t\t\tconst {onPaymentSetup, onCheckoutSuccess, onCheckoutFail} = eventRegistration;\n\n\t\t\tconst containerRef = useRef<HTMLDivElement | null>(null);\n\n\t\t\tuseEffect(() => {\n\t\t\t\tif (containerRef.current) {\n\t\t\t\t\tcontainerRef.current.innerHTML = '';\n\t\t\t\t\tibanElement.mount(containerRef.current);\n\t\t\t\t}\n\t\t\t}, []);\n\n\t\t\tuseEffect(() => {\n\t\t\t\tconst unsubscribe = onPaymentSetup(async () => {\n\t\t\t\t\tconst {result: transactionId, error: transactionError} = await startTransaction('peachpay_stripe_sepadebit');\n\n\t\t\t\t\tif (transactionError) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\tmessage: getErrorMessage(transactionError),\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (transactionId === undefined) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\tmessage: __('Missing transaction ID', 'peachpay-for-woocommerce'),\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst {paymentMethod, error} = await stripe.createPaymentMethod({\n\t\t\t\t\t\t\ttype: 'sepa_debit',\n\t\t\t\t\t\t\tsepa_debit: ibanElement,\n\t\t\t\t\t\t\tbilling_details: {\n\t\t\t\t\t\t\t\taddress: {\n\t\t\t\t\t\t\t\t\tcity: billing.billingAddress.city,\n\t\t\t\t\t\t\t\t\tcountry: billing.billingAddress.country,\n\t\t\t\t\t\t\t\t\tline1: billing.billingAddress.address_1,\n\t\t\t\t\t\t\t\t\tline2: billing.billingAddress.address_2,\n\t\t\t\t\t\t\t\t\tpostal_code: billing.billingAddress.postcode,\n\t\t\t\t\t\t\t\t\tstate: billing.billingAddress.state,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\temail: billing.billingAddress.email,\n\t\t\t\t\t\t\t\tname: billing.billingAddress.first_name + ' ' + billing.billingAddress.last_name,\n\t\t\t\t\t\t\t\tphone: billing.billingAddress.phone,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\tconst note = error.message ?? __('Failed to tokenize payment method.', 'peachpay-for-woocommerce');\n\t\t\t\t\t\t\tawait updateTransaction(transactionId, {note});\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: note,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!paymentMethod.id) {\n\t\t\t\t\t\t\tconst note = __('Failed to tokenize payment method, ID missing.', 'peachpay-for-woocommerce');\n\t\t\t\t\t\t\tawait updateTransaction(transactionId, {note});\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: note,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (billing.cartTotal.value > 0) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.SUCCESS,\n\t\t\t\t\t\t\t\tmeta: {\n\t\t\t\t\t\t\t\t\tpaymentMethodData: {\n\t\t\t\t\t\t\t\t\t\tpeachpay_transaction_id: transactionId,\n\t\t\t\t\t\t\t\t\t\tpeachpay_stripe_payment_method_id: paymentMethod.id,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst setupIntent = await createSetupIntent({\n\t\t\t\t\t\t\tpayment_method_type: 'sepa_debit',\n\t\t\t\t\t\t\tpayment_method_ID: paymentMethod.id,\n\t\t\t\t\t\t\tsetup_intent_url: settings.setup_intent_url,\n\t\t\t\t\t\t\tsetup_intent_nonce: settings.setup_intent_nonce,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (setupIntent === null) {\n\t\t\t\t\t\t\tconst note = __('Failed to create setup intent.', 'peachpay-for-woocommerce');\n\t\t\t\t\t\t\tawait updateTransaction(transactionId, {note});\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: note,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst {error: confirmError, setupIntent: confirmIntent} = await stripe.confirmSepaDebitSetup(\n\t\t\t\t\t\t\tsetupIntent.setup_intent_details.client_secret,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpayment_method: {\n\t\t\t\t\t\t\t\t\tsepa_debit: ibanElement,\n\t\t\t\t\t\t\t\t\tbilling_details: {\n\t\t\t\t\t\t\t\t\t\tname: billing.billingAddress.first_name + ' ' + billing.billingAddress.last_name,\n\t\t\t\t\t\t\t\t\t\temail: billing.billingAddress.email,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (confirmError) {\n\t\t\t\t\t\t\tconst note = confirmError.message ?? __('Failed to confirm setup intent.', 'peachpay-for-woocommerce');\n\t\t\t\t\t\t\tawait updateTransaction(transactionId, {note});\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: note,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (confirmIntent.status !== 'succeeded') {\n\t\t\t\t\t\t\tconst note = `${__('Setup intent resulted in invalid status', 'peachpay-for-woocommerce')} (${confirmIntent.status})`;\n\t\t\t\t\t\t\tawait updateTransaction(transactionId, {note});\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: note,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttypeof confirmIntent.payment_method === 'object' || confirmIntent.payment_method === null\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tconst note = `${__('Payment method invalid type', 'peachpay-for-woocommerce')} (${typeof confirmIntent.payment_method})`;\n\t\t\t\t\t\t\tawait updateTransaction(transactionId, {note});\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: note,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.SUCCESS,\n\t\t\t\t\t\t\tmeta: {\n\t\t\t\t\t\t\t\tpaymentMethodData: {\n\t\t\t\t\t\t\t\t\tpeachpay_transaction_id: transactionId,\n\t\t\t\t\t\t\t\t\tpeachpay_stripe_payment_method_id: confirmIntent.payment_method,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconst note = getErrorString(error);\n\t\t\t\t\t\tawait updateTransaction(transactionId, {note});\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\tmessage: note,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn unsubscribe;\n\t\t\t}, [onPaymentSetup, billing.billingAddress, billing.cartTotal]);\n\n\t\t\tuseEffect(() => {\n\t\t\t\tconst unsubscribe = onCheckoutSuccess(async (data: {redirectUrl: string}) => {\n\t\t\t\t\tconst dataURL = new URL(data.redirectUrl);\n\n\t\t\t\t\tconst [name, encodedStringData] = dataURL.hash.split('=');\n\n\t\t\t\t\tif (dataURL.hash === '' || name !== '#payment_data' || !encodedStringData) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst paymentData = parsePaymentData(encodedStringData);\n\n\t\t\t\t\tif (paymentData === null) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\tmessage: __('Failed to parse payment data', 'peachpay-for-woocommerce'),\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tconst clientSecret = paymentData.data.client_secret;\n\t\t\t\t\tconst successURL = paymentData.success_url;\n\n\t\t\t\t\tconst {paymentIntent, error} = await stripe.retrievePaymentIntent(clientSecret);\n\t\t\t\t\tif (!paymentIntent || error) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\tmessage: error?.message ?? __('Failed to retrieve payment intent.', 'peachpay-for-woocommerce'),\n\t\t\t\t\t\t\tmessageContext: emitResponse.noticeContexts.PAYMENTS,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (paymentIntent.status === 'succeeded' || paymentIntent.status === 'requires_capture' || paymentIntent.status === 'processing') {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.SUCCESS,\n\t\t\t\t\t\t\tredirectUrl: successURL,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (paymentIntent.status === 'requires_action') {\n\t\t\t\t\t\tconst {paymentIntent, error} = await stripe.confirmSepaDebitPayment(clientSecret);\n\t\t\t\t\t\tif (!paymentIntent || error) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: error?.message ?? __('Failed to confirm payment intent.', 'peachpay-for-woocommerce'),\n\t\t\t\t\t\t\t\tmessageContext: emitResponse.noticeContexts.PAYMENTS,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (paymentIntent.status === 'succeeded' || paymentIntent.status === 'requires_capture' || paymentIntent.status === 'processing') {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.SUCCESS,\n\t\t\t\t\t\t\t\tredirectUrl: successURL,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\tmessage: __('Something went wrong, but the payment may have gone through. Please contact store support.', 'peachpay-for-woocommerce'),\n\t\t\t\t\t\tmessageContext: emitResponse.noticeContexts.PAYMENTS,\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\t\treturn unsubscribe;\n\t\t\t}, [onCheckoutSuccess]);\n\n\t\t\tuseEffect(() => {\n\t\t\t\tconst unsubscribe = onCheckoutFail((data: CheckoutAfterProcessingWithErrorEventData) => {\n\t\t\t\t\tif (data.processingResponse?.paymentStatus === emitResponse.responseTypes.FAIL) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.FAIL,\n\t\t\t\t\t\t\tmessage: data.processingResponse.paymentDetails['message'],\n\t\t\t\t\t\t\tmessageContext: emitResponse.noticeContexts.PAYMENTS,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (data.processingResponse?.paymentStatus === 'not set' && data.processingResponse.message) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: 'not set',\n\t\t\t\t\t\t\tmessage: data.processingResponse.message,\n\t\t\t\t\t\t\tmessageContext: emitResponse.noticeContexts.CHECKOUT,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\tmessage: __('Something went wrong while processing the request.', 'peachpay-for-woocommerce'),\n\t\t\t\t\t\tmessageContext: emitResponse.noticeContexts.PAYMENTS,\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\t\treturn unsubscribe;\n\t\t\t}, [onCheckoutFail]);\n\n\t\t\tif (settings.currency_fallback_required) {\n\t\t\t\treturn <CurrencyFallback name={title} currency={settings.currency_fallback_required} />;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<div ref={containerRef}>Loading...</div>\n\t\t\t\t\t<p style={{fontSize: 'smaller', textAlign: 'justify', paddingTop: '16px'}}>\n\t\t\t\t\t\t{settings.conditions}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t);\n\t\t};\n\n\t\tconst Label = (props: PaymentMethodInterface) => {\n\t\t\tconst {PaymentMethodLabel, PaymentMethodIcons} = props.components;\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<PaymentMethodLabel text={title} />\n\t\t\t\t\t<PaymentMethodIcons icons={[{\n\t\t\t\t\t\tid: 'peachpay_stripe_sepadebit',\n\t\t\t\t\t\tsrc: settings.icon_url,\n\t\t\t\t\t\talt: title,\n\t\t\t\t\t}]} className='pp-label-icon' />\n\t\t\t\t</>\n\t\t\t);\n\t\t};\n\n\t\tregisterPaymentMethod({\n\t\t\tariaLabel: title,\n\t\t\tcanMakePayment(data) {\n\t\t\t\treturn data.paymentMethods.includes('peachpay_stripe_sepadebit');\n\t\t\t},\n\t\t\t// @ts-expect-error Missing types are expected because WooCommerce gives the props\n\t\t\tcontent: <Content />,\n\t\t\t// @ts-expect-error Missing types are expected because WooCommerce gives the props\n\t\t\tedit: <Content />,\n\t\t\t// @ts-expect-error Missing types are expected because WooCommerce gives the props\n\t\t\tlabel: <Label />,\n\t\t\tname: 'peachpay_stripe_sepadebit',\n\t\t\tsupports: {\n\t\t\t\tfeatures: settings.supports,\n\t\t\t},\n\t\t});\n\t})\n\t.catch(error => {\n\t\tthrow error as Error;\n\t});\n"],"names":["V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","stripePromise","stripePromise$1","Promise","resolve","then","params","reject","window","document","Stripe","console","warn","script","scripts","querySelectorAll","concat","i","length","test","src","findScript","queryString","advancedFraudSignals","createElement","headOrBody","head","body","Error","appendChild","injectScript","addEventListener","error","loadCalled","err","loadStripe","_len","arguments","args","Array","_key","startTime","Date","now","maybeStripe","stripe","apply","undefined","_registerWrapper","name","version","registerWrapper","initStripe","CurrencyFallback","props","currency","style","display","flexDirection","textAlign","margin","fontSize","__","type","className","marginBottom","onClick","peachpayUpdateCurrencyCookie","location","reload","_ref","_asyncToGenerator","_regeneratorRuntime","_callee","public_key","stripeAccount","_context","prev","next","abrupt","peachpay_stripe","locale","message","stop","_x","_x2","SetupIntentFetchResultSchema","z","object","setup_intent_details","client_secret","string","createSetupIntent","_x3","_createSetupIntent","_callee2","formData","_yield$maybeFetchWP","result","setupIntentResult","_context2","FormData","append","setup_intent_nonce","payment_method_type","payment_method_ID","maybeFetchWP","setup_intent_url","method","sent","data","safeParse","success","parsePaymentData","encodedStringData","encodedData","encodedPaymentData","intermediate_url","success_url","transaction_id","JSON","parse","atob","decodeURIComponent","parsedData","newCurrency","cookie","getErrorString","stack","errorString","stringify","getErrorMessage","thrownError","_isErrorWithMessage","_unused","String","_toErrorWithMessage","_x4","_x5","_maybeFetchWP","_callee5","input","init","regexSelector","_args5","_context5","fetch","_ref2","_callee4","response","_context4","text","_x7","jsonText","extractedJSONText","exec","log","catch","module","exports","_arrayLikeToArray","arr","len","arr2","_arrayWithHoles","isArray","asyncGeneratorStep","gen","_next","_throw","key","arg","info","value","done","fn","self","this","_iterableToArrayLimit","r","l","t","Symbol","iterator","e","n","u","a","f","o","call","Object","push","_nonIterableRest","TypeError","_slicedToArray","_unsupportedIterableToArray","minLen","prototype","toString","slice","constructor","from","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","d","definition","defineProperty","enumerable","get","obj","prop","hasOwnProperty","parsedResult","title","icon_url","conditions","supports","array","connect_id","currency_fallback_required","nullable","getSetting","settings","decodeEntities","ibanElement","elements","create","base","color","supportedCountries","Content","context","emitResponse","eventRegistration","billing","onPaymentSetup","onCheckoutSuccess","onCheckoutFail","containerRef","useRef","useEffect","current","innerHTML","mount","_yield$startTransacti","transactionId","transactionError","_yield$stripe$createP","paymentMethod","_error$message","note","_note","setupIntent","_note2","_yield$stripe$confirm","confirmError","confirmIntent","_confirmError$message","_note3","_note4","_note5","_note6","startTransaction","responseTypes","ERROR","createPaymentMethod","sepa_debit","billing_details","address","city","billingAddress","country","line1","address_1","line2","address_2","postal_code","postcode","state","email","first_name","last_name","phone","updateTransaction","id","cartTotal","SUCCESS","meta","paymentMethodData","peachpay_transaction_id","peachpay_stripe_payment_method_id","confirmSepaDebitSetup","payment_method","status","t0","unsubscribe","dataURL","_dataURL$hash$split","_dataURL$hash$split2","paymentData","clientSecret","successURL","_yield$stripe$retriev","paymentIntent","_error$message2","_yield$stripe$confirm2","_paymentIntent","_error","_error$message3","URL","redirectUrl","hash","split","retrievePaymentIntent","messageContext","noticeContexts","PAYMENTS","confirmSepaDebitPayment","_data$processingRespo","_data$processingRespo2","processingResponse","paymentStatus","FAIL","paymentDetails","CHECKOUT","ref","paddingTop","registerPaymentMethod","ariaLabel","canMakePayment","paymentMethods","includes","content","edit","label","_props$components","components","PaymentMethodLabel","PaymentMethodIcons","Fragment","icons","alt","features"],"sourceRoot":""}